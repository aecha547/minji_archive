<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SIDE D: BLOOM</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap');
body{background:#000;color:#e8dcc8;font-family:'Cormorant Garamond',serif;height:100vh;margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;overflow:hidden}
.msg{font-size:1.5rem;opacity:0;transform:translateY(20px);transition:all 1s;margin-bottom:20px;max-width:600px;padding:0 20px}
.msg.show{opacity:1;transform:translateY(0)}
.final{font-size:2.5rem;color:#ff9ec6;font-weight:bold}
.back-btn{position:absolute;top:10px;right:10px;color:#555;text-decoration:none;z-index:100;font-family:monospace}
</style>
</head>
<body>
<a href="index.html" class="back-btn">‚èè EJECT</a>
<audio id="bgm1" autoplay><source src="LOST.mp3" type="audio/mpeg"></audio>
<audio id="bgm2" loop><source src="Wgft BURNER BOY.mp3" type="audio/mpeg"></audio>

<div id="container"></div>

<script>
const lines = [
  "I have been cheated on before.",
  "I shut away the concept of love. Built a wall.",
  "Then you came along. With your 48 drafts.",
  "A seed has many endings.",
  "1. It grows.",
  "2. It stays dormant.",
  "3. It breaks the rock.",
  "My truthful feelings?",
  "I feel like there is a chance.",
  "Not for your smile. Or your laugh.",
  "But for YOU."
];

const container = document.getElementById('container');
let idx = 0;

function showLine(){
  if(idx >= lines.length){
    showFinal();
    return;
  }
  
  // Clear previous
  container.innerHTML = "";
  
  const el = document.createElement('div');
  el.className = 'msg';
  el.innerHTML = lines[idx];
  container.appendChild(el);
  
  // Trigger animation
  setTimeout(() => el.classList.add('show'), 50);
  
  idx++;
  setTimeout(showLine, 3500);
}

function showFinal(){
  // Switch Music
  const b1 = document.getElementById('bgm1');
  const b2 = document.getElementById('bgm2');
  
  // Fade out b1
  let vol = 1;
  const fade = setInterval(() => {
    vol -= 0.1;
    if(vol <= 0){
      clearInterval(fade);
      b1.pause();
      b2.play(); // Play WGFT (She loves the start)
      
      const el = document.createElement('div');
      el.className = 'msg final';
      el.innerHTML = "Will you be my first and only valentine?<br>üå±";
      container.innerHTML = "";
      container.appendChild(el);
      setTimeout(() => el.classList.add('show'), 100);
      
      // Mark Complete
      let s = JSON.parse(localStorage.getItem('seed_progress') || '{}');
      s.tape4 = true;
      localStorage.setItem('seed_progress', JSON.stringify(s));
    } else {
      b1.volume = vol;
    }
  }, 200);
}

setTimeout(showLine, 1000);
</script>
</body>
</html>
