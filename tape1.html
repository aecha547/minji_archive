<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>SIDE A: SOIL — THE SEED OF MANY ENDINGS</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3CradialGradient id='sg' cx='50%25' cy='50%25'%3E%3Cstop offset='0%25' stop-color='%23a8e6a3' stop-opacity='.8'/%3E%3Cstop offset='100%25' stop-color='%23558b2f' stop-opacity='.4'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='32' height='32' fill='%23050505'/%3E%3Cellipse cx='16' cy='18' rx='6' ry='9' fill='url(%23sg)' transform='rotate(-10 16 18)'/%3E%3Cellipse cx='16' cy='11' rx='3' ry='2' fill='%23c8e6c9' transform='rotate(-10 16 11)'/%3E%3Cpath d='M12 6 Q16 2 20 6' stroke='%2381c784' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E">
<style>
@import url('https://fonts.googleapis.com/css2?family=VT323&family=Caveat:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=Space+Mono:wght@400;700&family=DM+Serif+Display:ital@0;1&display=swap');

/* ═══════════════════════════════════════════════════════════════════
   DESIGN TOKENS — Warm earthy palette
   ═══════════════════════════════════════════════════════════════════ */
:root {
  --bg-deep: #010101;
  --bg: #030303;
  --bg-warm: #080605;
  
  --earth-deep: #2d1f15;
  --earth: #4a3528;
  --earth-light: #7a5a35;
  --earth-glow: #9a7050;
  --earth-pale: #c9a080;
  
  --pink-deep: #5a1025;
  --pink: #802845;
  --pink-light: #b04865;
  --pink-soft: #d87895;
  --pink-glow: #ff5080;
  
  --gold-deep: #604815;
  --gold: #907030;
  --gold-light: #b89850;
  --gold-glow: #e0c080;
  
  --snap-yellow: #FFFC00;
  --snap-dark: #1a1a1a;
  --discord-blue: #5865F2;
  --tiktok-cyan: #00f2ea;
  --tiktok-pink: #ff0050;
  
  --trust: #4a8040;
  --guard: #3a3a4a;
  
  --white: #e0dcd5;
  --dim: #5a5550;
  --muted: #3a3530;
  
  --font-crt: 'VT323', monospace;
  --font-hand: 'Caveat', cursive;
  --font-serif: 'Cormorant Garamond', serif;
  --font-body: 'EB Garamond', serif;
  --font-mono: 'Space Mono', monospace;
  --font-display: 'DM Serif Display', serif;
  
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-dramatic: cubic-bezier(0.2, 0, 0.13, 1);
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
html, body { 
  height: 100%; 
  overflow: hidden; 
  background: var(--bg-deep); 
  font-family: var(--font-body);
  color: var(--white);
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}

/* ═══════════════════════════════════════════════════════════════════
   VHS BACKGROUND LAYER
   ═══════════════════════════════════════════════════════════════════ */
#vhs-layer {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

#vhs-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  opacity: 0.7;
}

#noise-layer {
  position: fixed;
  inset: 0;
  z-index: 2;
  pointer-events: none;
  opacity: 0.04;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  animation: noiseShift 0.5s steps(5) infinite;
}

@keyframes noiseShift {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(-2%, -2%); }
  50% { transform: translate(2%, 0); }
  75% { transform: translate(-1%, 2%); }
}

#particles {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  overflow: hidden;
}

.particle {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  will-change: transform, opacity;
}

/* ═══════════════════════════════════════════════════════════════════
   BACKGROUND SCENES — Multiple atmospheric layers
   ═══════════════════════════════════════════════════════════════════ */
#bg-scenes {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  opacity: 0;
  transition: opacity 5s var(--ease-smooth);
}

#bg-scenes.active { opacity: 0.35; }

.bg-scene {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 6s var(--ease-smooth);
  overflow: hidden;
}

.bg-scene.active { opacity: 1; }
.bg-scene svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* Scene animations */
.scene-seed .soil { animation: soilPulse 14s ease-in-out infinite; }
@keyframes soilPulse { 0%, 100% { opacity: 0.35; } 50% { opacity: 0.65; } }

.scene-seed .roots { animation: rootGrow 12s ease-in-out infinite; transform-origin: top; }
@keyframes rootGrow { 0%, 100% { transform: scaleY(0.4); opacity: 0.15; } 50% { transform: scaleY(1); opacity: 0.5; } }

.scene-seed .main-stem { transform-origin: bottom; animation: stemRise 12s ease-in-out infinite; }
@keyframes stemRise { 0%, 100% { transform: scaleY(0.25); } 50% { transform: scaleY(1); } }

.scene-seed .stem-segment { animation: stemSway 7s ease-in-out infinite; transform-origin: bottom; }
.scene-seed .stem-segment:nth-child(2) { animation-delay: 0.4s; }
@keyframes stemSway { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(2deg); } }

.scene-seed .leaf { transform-origin: bottom left; animation: leafUnfold 10s ease-in-out infinite; }
.scene-seed .leaf:nth-child(2) { animation-delay: 0.6s; transform-origin: bottom right; }
.scene-seed .leaf:nth-child(3) { animation-delay: 1.2s; }
.scene-seed .leaf:nth-child(4) { animation-delay: 1.8s; transform-origin: bottom right; }
@keyframes leafUnfold { 0%, 100% { transform: rotate(0deg) scale(0.25); opacity: 0.15; } 50% { transform: rotate(28deg) scale(1); opacity: 1; } }

.scene-seed .flower-center { animation: flowerPulse 5s ease-in-out infinite; }
@keyframes flowerPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.25); } }

.scene-seed .petal { transform-origin: center bottom; animation: petalBloom 8s ease-in-out infinite; }
.scene-seed .petal:nth-child(2) { animation-delay: 0.25s; }
.scene-seed .petal:nth-child(3) { animation-delay: 0.5s; }
.scene-seed .petal:nth-child(4) { animation-delay: 0.75s; }
.scene-seed .petal:nth-child(5) { animation-delay: 1s; }
@keyframes petalBloom { 0%, 100% { transform: scale(0.15); opacity: 0.1; } 50% { transform: scale(1); opacity: 1; } }

.scene-seed .pollen { animation: pollenFloat 7s ease-in-out infinite; }
.scene-seed .pollen:nth-child(2) { animation-delay: 1.5s; }
.scene-seed .pollen:nth-child(3) { animation-delay: 3s; }
.scene-seed .pollen:nth-child(4) { animation-delay: 4.5s; }
.scene-seed .pollen:nth-child(5) { animation-delay: 6s; }
@keyframes pollenFloat { 0%, 100% { opacity: 0; transform: translate(0, 0); } 50% { opacity: 0.7; transform: translate(40px, -50px); } }

.scene-seed .butterfly { animation: butterflyFloat 20s ease-in-out infinite; }
.scene-seed .butterfly:nth-child(2) { animation-delay: 7s; animation-duration: 15s; }
@keyframes butterflyFloat { 0%, 100% { transform: translate(0, 0); } 25% { transform: translate(60px, -50px); } 50% { transform: translate(120px, 10px); } 75% { transform: translate(60px, 40px); } }

.scene-seed .butterfly-wing { animation: wingFlutter 0.1s ease-in-out infinite; transform-origin: center; }
@keyframes wingFlutter { 0%, 100% { transform: scaleX(1); } 50% { transform: scaleX(0.15); } }

.scene-seed .water-drop { animation: waterDrop 6s ease-in-out infinite; }
.scene-seed .water-drop:nth-child(2) { animation-delay: 2s; }
.scene-seed .water-drop:nth-child(3) { animation-delay: 4s; }
@keyframes waterDrop { 0% { opacity: 0; transform: translateY(-40px); } 12% { opacity: 0.8; } 100% { opacity: 0; transform: translateY(150px); } }

.scene-seed .glow-aura { animation: glowPulse 10s ease-in-out infinite; }
@keyframes glowPulse { 0%, 100% { opacity: 0.08; transform: scale(1); } 50% { opacity: 0.3; transform: scale(1.4); } }

.scene-seed .firefly { animation: fireflyGlow 4s ease-in-out infinite; }
.scene-seed .firefly:nth-child(2) { animation-delay: 1s; }
.scene-seed .firefly:nth-child(3) { animation-delay: 2s; }
.scene-seed .firefly:nth-child(4) { animation-delay: 3s; }
.scene-seed .firefly:nth-child(5) { animation-delay: 0.5s; }
.scene-seed .firefly:nth-child(6) { animation-delay: 1.5s; }
@keyframes fireflyGlow { 0%, 100% { opacity: 0; } 50% { opacity: 0.9; } }

.scene-seed .grass { animation: grassWave 5s ease-in-out infinite; transform-origin: bottom; }
.scene-seed .grass:nth-child(2) { animation-delay: 0.2s; }
.scene-seed .grass:nth-child(3) { animation-delay: 0.4s; }
.scene-seed .grass:nth-child(4) { animation-delay: 0.6s; }
@keyframes grassWave { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }

/* Phone scene animations */
.scene-phone .phone-rack { animation: rackPulse 8s ease-in-out infinite; }
@keyframes rackPulse { 0%, 100% { opacity: 0.1; } 50% { opacity: 0.25; } }

.scene-phone .notification-dot { animation: notifPulse 2s ease-in-out infinite; }
@keyframes notifPulse { 0%, 100% { opacity: 0.4; r: 4; } 50% { opacity: 1; r: 6; } }

/* ═══════════════════════════════════════════════════════════════════
   PHONE SVG ASSET — Larger, cleaner design
   ═══════════════════════════════════════════════════════════════════ */
#phone-container {
  position: fixed;
  inset: 0;
  z-index: 15;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  transform: scale(0.85) translateY(30px);
  transition: all 1s var(--ease-smooth);
}

#phone-container.show {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.phone-svg {
  width: clamp(300px, 50vw, 440px);
  height: auto;
  filter: drop-shadow(0 0 80px rgba(0, 0, 0, 0.9)) drop-shadow(0 20px 60px rgba(0, 0, 0, 0.5));
}

/* ═══════════════════════════════════════════════════════════════════
   CRT EFFECTS
   ═══════════════════════════════════════════════════════════════════ */
.crt-screen {
  position: relative;
  overflow: hidden;
  min-height: 100vh;
}

.crt-screen::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.18) 2px,
    rgba(0, 0, 0, 0.18) 4px
  );
  pointer-events: none;
  z-index: 100;
}

.crt-screen::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 35%, rgba(0, 0, 0, 0.85) 100%);
  pointer-events: none;
  z-index: 101;
}

.scan-bar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 10px;
  background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.05), transparent);
  opacity: 0.6;
  z-index: 102;
  pointer-events: none;
  animation: scanbar 7s linear infinite;
}

@keyframes scanbar {
  from { top: -8%; }
  to { top: 108%; }
}

.tracking-bar {
  position: fixed;
  left: 0;
  width: 100%;
  height: 8px;
  background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  opacity: 0;
  z-index: 103;
  pointer-events: none;
  transition: opacity 0.3s;
}

.tracking-bar.on {
  opacity: 1;
  animation: trackDrift 5s linear infinite;
}

@keyframes trackDrift {
  0% { top: -4%; }
  100% { top: 104%; }
}

/* ═══════════════════════════════════════════════════════════════════
   LOADING OVERLAY
   ═══════════════════════════════════════════════════════════════════ */
#loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: var(--bg-deep);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 1;
  transition: opacity 2.5s var(--ease-smooth);
}

#loading-overlay.hidden {
  opacity: 0;
  pointer-events: none;
}

.seed-loading {
  width: clamp(110px, 28vw, 160px);
  height: clamp(110px, 28vw, 160px);
  animation: seedPulse 5s ease-in-out infinite;
  filter: drop-shadow(0 0 40px rgba(168, 230, 163, 0.6));
}

@keyframes seedPulse {
  0%, 100% { transform: scale(1) rotate(-12deg); }
  50% { transform: scale(1.12) rotate(-12deg); }
}

#loading-overlay h1 {
  font-family: var(--font-display);
  font-size: clamp(1.6rem, 5vw, 2.4rem);
  font-weight: 400;
  color: var(--earth-glow);
  letter-spacing: 4px;
  text-shadow: 0 0 50px var(--earth);
  text-align: center;
  margin-top: 28px;
  animation: titleGlow 4s ease-in-out infinite;
}

@keyframes titleGlow {
  0%, 100% { opacity: 0.65; text-shadow: 0 0 40px var(--earth); }
  50% { opacity: 1; text-shadow: 0 0 60px var(--earth-glow); }
}

#loading-overlay .sub {
  font-family: var(--font-hand);
  font-size: clamp(1.1rem, 3vw, 1.4rem);
  color: var(--earth-pale);
  margin-top: 14px;
  opacity: 0.55;
}

.boot-text {
  color: var(--earth);
  font-family: var(--font-crt);
  font-size: clamp(13px, 2.2vw, 15px);
  margin-top: 50px;
  text-align: left;
  width: min(340px, 85vw);
  line-height: 2.4;
  min-height: 160px;
  white-space: pre-wrap;
}

.boot-cursor {
  display: inline-block;
  width: 10px;
  height: 1.2em;
  background: var(--earth);
  vertical-align: text-bottom;
  margin-left: 3px;
  animation: blink 0.9s step-end infinite;
}

@keyframes blink { 50% { opacity: 0; } }

/* ═══════════════════════════════════════════════════════════════════
   HEADER
   ═══════════════════════════════════════════════════════════════════ */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 50;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 24px;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.9), transparent);
}

.back-btn {
  color: var(--dim);
  text-decoration: none;
  font-family: var(--font-crt);
  font-size: 0.95rem;
  transition: all 0.6s var(--ease-smooth);
}

.back-btn:hover {
  color: var(--earth-glow);
  text-shadow: 0 0 20px var(--earth);
}

.tape-label {
  background: linear-gradient(180deg, #f5efe5, #d8d0c0);
  color: #1a1510;
  padding: 6px 16px;
  font-family: var(--font-crt);
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  border: 1px solid #888;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

.scene-counter {
  font-family: var(--font-crt);
  font-size: 13px;
  color: var(--dim);
  letter-spacing: 2px;
}

/* ═══════════════════════════════════════════════════════════════════
   MAIN CONTENT — With scroll and breathing room
   ═══════════════════════════════════════════════════════════════════ */
.main {
  position: relative;
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 100px 28px 60px;
  transition: opacity 1.8s var(--ease-smooth);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}

.main::-webkit-scrollbar { display: none; }
.main.fade-out { opacity: 0; }

/* ═══════════════════════════════════════════════════════════════════
   SHEEPY NARRATOR — Always visible speed controls
   ═══════════════════════════════════════════════════════════════════ */
.sheepy-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  margin-bottom: 45px;
  opacity: 0;
  transform: translateY(-30px);
  transition: all 1.4s var(--ease-smooth);
  position: relative;
}

.sheepy-container.show { opacity: 1; transform: translateY(0); }
.sheepy-container.hide { opacity: 0; transform: translateY(-35px) scale(0.92); }

.sheepy-glow {
  width: clamp(140px, 32vw, 180px);
  height: clamp(140px, 32vw, 180px);
  background: radial-gradient(circle, rgba(74, 53, 40, 0.4) 0%, rgba(74, 53, 40, 0.1) 45%, transparent 70%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: sheepyGlow 6s ease-in-out infinite;
  position: relative;
}

@keyframes sheepyGlow {
  0%, 100% { transform: scale(1); opacity: 0.75; }
  50% { transform: scale(1.1); opacity: 1; }
}

.sheepy-glow::before {
  content: '';
  position: absolute;
  inset: -30px;
  background: radial-gradient(circle, rgba(154, 112, 80, 0.25) 0%, transparent 70%);
  border-radius: 50%;
  animation: sheepyAura 8s ease-in-out infinite;
}

@keyframes sheepyAura {
  0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.4; }
  50% { transform: scale(1.3) rotate(180deg); opacity: 0.9; }
}

.sheepy-text {
  font-family: var(--font-serif);
  font-size: clamp(1.05rem, 2.8vw, 1.4rem);
  font-weight: 400;
  color: var(--earth-pale);
  text-align: center;
  max-width: 420px;
  line-height: 2.4;
  min-height: 4em;
}

.sheepy-text .hand {
  font-family: var(--font-hand);
  font-size: 1.3em;
  color: var(--gold-glow);
  text-shadow: 0 0 20px rgba(224, 192, 128, 0.5);
}

.sheepy-text .whisper {
  font-style: italic;
  opacity: 0.65;
  font-size: 0.9em;
}

.sheepy-controls {
  position: absolute;
  bottom: -50px;
  display: flex;
  gap: 14px;
  opacity: 0.75;
  transition: opacity 0.5s;
}

.sheepy-controls.show {
  opacity: 0.85 !important;
}

.sheepy-container:hover .sheepy-controls {
  opacity: 1;
}

.speed-btn {
  background: rgba(0, 0, 0, 0.7);
  border: 1px solid var(--earth);
  border-radius: 6px;
  color: var(--earth-pale);
  font-family: var(--font-crt);
  font-size: 12px;
  padding: 6px 14px;
  cursor: pointer;
  transition: all 0.4s var(--ease-smooth);
}

.speed-btn:hover,
.speed-btn.active {
  background: var(--earth);
  color: #fff;
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(74, 53, 40, 0.4);
}

/* ═══════════════════════════════════════════════════════════════════
   SCENE NARRATIVE — BREATHING SPACE
   ═══════════════════════════════════════════════════════════════════ */
.scene {
  max-width: 580px;
  width: 100%;
  text-align: center;
}

.scene p {
  font-family: var(--font-serif);
  font-size: clamp(1.05rem, 2.8vw, 1.4rem);
  font-weight: 400;
  line-height: 2.8;
  color: var(--white);
  margin-bottom: clamp(28px, 5vh, 50px);
  opacity: 0;
  transform: translateY(20px);
  transition: all 1.2s var(--ease-smooth);
}

.scene p.show {
  opacity: 1;
  transform: translateY(0);
  animation: breatheIn 1.2s var(--ease-smooth) forwards;
}

@keyframes breatheIn {
  from { opacity: 0; transform: translateY(22px); }
  to { opacity: 1; transform: translateY(0); }
}

.scene p.hide { opacity: 0; transform: translateY(-15px); }

.scene .narrator {
  color: var(--dim);
  font-style: italic;
  font-size: 0.9em;
}

.scene .her {
  color: var(--pink-soft);
  text-shadow: 0 0 25px rgba(216, 120, 149, 0.4);
}

.scene .me {
  color: var(--gold-light);
  text-shadow: 0 0 25px rgba(184, 152, 80, 0.4);
}

.scene .memory {
  color: var(--earth-pale);
  font-style: italic;
  font-size: 0.85em;
  opacity: 0.8;
  border-left: 3px solid var(--earth);
  padding: 18px 22px;
  margin: clamp(32px, 6vh, 56px) auto;
  max-width: 440px;
  text-align: left;
  line-height: 2.6;
  background: rgba(74, 53, 40, 0.08);
  border-radius: 0 8px 8px 0;
}

.scene .moment {
  color: var(--pink-glow);
  font-weight: 500;
  font-size: 1.15em;
  text-shadow: 0 0 40px rgba(255, 80, 128, 0.6);
  letter-spacing: 2px;
  display: block;
  margin: clamp(24px, 5vh, 44px) auto;
}

.scene .time {
  color: var(--dim);
  font-family: var(--font-crt);
  font-size: 0.85em;
  letter-spacing: 4px;
  display: block;
  margin-bottom: clamp(20px, 4vh, 36px);
}

.scene .phone {
  color: var(--pink-light);
  font-family: var(--font-mono);
  font-size: 0.95em;
  letter-spacing: 0.5px;
  opacity: 0.9;
}

.scene .snapchat {
  color: var(--snapchat-yellow);
  font-family: var(--font-mono);
  font-weight: 700;
  text-shadow: 0 0 15px rgba(255, 252, 0, 0.4);
}

.scene .discord {
  color: var(--discord-blue);
  font-family: var(--font-mono);
  font-weight: 600;
  text-shadow: 0 0 15px rgba(88, 101, 242, 0.4);
}

.scene .tiktok {
  background: linear-gradient(90deg, var(--tiktok-cyan), var(--tiktok-pink));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family: var(--font-mono);
  font-weight: 700;
}

/* ═══════════════════════════════════════════════════════════════════
   CHOICES — With better spacing
   ═══════════════════════════════════════════════════════════════════ */
.choices {
  width: 100%;
  max-width: 500px;
  display: flex;
  flex-direction: column;
  gap: clamp(16px, 3vh, 24px);
  opacity: 0;
  transform: translateY(30px);
  transition: all 1.4s 0.5s var(--ease-smooth);
  margin-top: clamp(20px, 4vh, 36px);
}

.choices.show { opacity: 1; transform: translateY(0); }

.choice {
  width: 100%;
  padding: clamp(18px, 3vh, 24px) clamp(22px, 4vw, 28px);
  background: linear-gradient(145deg, rgba(18, 10, 6, 0.97), rgba(8, 4, 2, 0.99));
  border: 1px solid rgba(74, 53, 40, 0.35);
  border-radius: 10px;
  color: var(--white);
  font-family: var(--font-serif);
  font-size: clamp(1.05rem, 2.4vw, 1.25rem);
  text-align: left;
  cursor: pointer;
  transition: all 0.6s var(--ease-smooth);
  position: relative;
  overflow: hidden;
}

.choice::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(154, 112, 80, 0.1), transparent);
  transform: translateX(-100%);
  transition: transform 0.8s var(--ease-smooth);
}

.choice:hover:not(:disabled)::before {
  transform: translateX(100%);
}

.choice:hover:not(:disabled) {
  border-color: var(--earth-glow);
  transform: translateX(10px);
  box-shadow: 
    0 8px 30px rgba(74, 53, 40, 0.25),
    inset 0 0 35px rgba(154, 112, 80, 0.06);
}

.choice:disabled {
  cursor: default;
  opacity: 0.35;
}

.choice.selected {
  border-color: var(--earth);
  background: linear-gradient(145deg, rgba(74, 53, 40, 0.25), rgba(74, 53, 40, 0.1));
  box-shadow: 0 0 50px rgba(154, 112, 80, 0.3);
}

.choice .choice-text {
  display: block;
  margin-bottom: 12px;
  line-height: 1.55;
}

.choice .effect {
  display: block;
  font-size: 0.8rem;
  color: var(--earth-pale);
  font-family: var(--font-crt);
  font-style: italic;
  letter-spacing: 1px;
}

.choice .preview {
  display: block;
  font-size: 0.7rem;
  color: var(--dim);
  margin-top: 10px;
  font-family: var(--font-hand);
}

/* ═══════════════════════════════════════════════════════════════════
   MEMORY MATCH
   ═══════════════════════════════════════════════════════════════════ */
.match-container {
  width: 100%;
  max-width: 460px;
  opacity: 0;
  transform: scale(0.95);
  transition: all 1.4s var(--ease-smooth);
}

.match-container.show { opacity: 1; transform: scale(1); }

.match-header {
  text-align: center;
  margin-bottom: 28px;
}

.match-title {
  font-size: clamp(1.05rem, 2.4vw, 1.3rem);
  font-family: var(--font-crt);
  color: var(--earth-glow);
  letter-spacing: 0.3em;
  text-shadow: 0 0 30px rgba(154, 112, 80, 0.5);
  margin-bottom: 12px;
}

.match-subtitle {
  font-family: var(--font-hand);
  font-size: 1.15rem;
  color: var(--earth-pale);
  opacity: 0.65;
}

.match-stakes {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin: 24px 0;
}

.stake {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.stake-label {
  font-size: 11px;
  font-family: var(--font-crt);
  color: var(--dim);
  letter-spacing: 2px;
}

.stake-value {
  font-size: 22px;
  font-family: var(--font-crt);
  color: var(--gold);
}

.hearts {
  display: flex;
  gap: 5px;
}

.heart {
  width: 16px;
  height: 16px;
  fill: var(--pink-glow);
  opacity: 0.2;
  transition: all 0.5s var(--ease-smooth);
}

.heart.active {
  opacity: 1;
  filter: drop-shadow(0 0 8px var(--pink-glow));
}

.heart.lost {
  opacity: 0.12;
  fill: var(--dim);
}

.match-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
}

.match-card {
  aspect-ratio: 1;
  background: linear-gradient(145deg, #1a1410, #0d0a08);
  border: 2px solid #2a2015;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-hand);
  font-size: clamp(0.75rem, 1.8vw, 0.95rem);
  color: var(--dim);
  cursor: pointer;
  transition: all 0.6s var(--ease-smooth);
  position: relative;
  overflow: hidden;
}

.match-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(154, 112, 80, 0.18) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.5s;
}

.match-card:hover:not(.flipped):not(.matched)::before { opacity: 1; }

.match-card:hover:not(.flipped):not(.matched) {
  border-color: #3a2a1f;
  transform: scale(1.06);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
}

.match-card.flipped,
.match-card.matched {
  background: linear-gradient(145deg, #2a1a10, #1a0c08);
  border-color: var(--earth);
}

.match-card.flipped .card-inner,
.match-card.matched .card-inner {
  opacity: 1;
  transform: rotateY(0);
}

.card-inner {
  opacity: 0;
  transform: rotateY(90deg);
  transition: all 0.7s var(--ease-smooth);
  color: var(--earth-pale);
  text-align: center;
  padding: 10px;
  line-height: 1.7;
}

.match-card.matched {
  border-color: var(--trust);
  box-shadow: 0 0 30px rgba(74, 128, 64, 0.35);
  animation: matchedPulse 0.7s ease-out;
}

@keyframes matchedPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.match-card.matched .card-inner {
  color: var(--trust);
}

.match-card.wrong {
  animation: shake 0.4s;
  border-color: #aa4444;
}

.match-story {
  margin-top: 32px;
  text-align: center;
  min-height: 80px;
  font-family: var(--font-serif);
  font-size: 1.1rem;
  color: var(--gold-light);
  font-style: italic;
  line-height: 2.2;
  opacity: 0;
  transform: translateY(15px);
  transition: all 0.8s var(--ease-smooth);
}

.match-story.show {
  opacity: 1;
  transform: translateY(0);
}

/* ═══════════════════════════════════════════════════════════════════
   HUD
   ═══════════════════════════════════════════════════════════════════ */
.hud {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 50;
  text-align: right;
  opacity: 0;
  transform: translateX(30px);
  transition: all 1.4s var(--ease-smooth);
}

.hud.show { opacity: 1; transform: translateX(0); }

.hud-title {
  font-size: 11px;
  font-family: var(--font-crt);
  color: var(--dim);
  letter-spacing: 3px;
  margin-bottom: 12px;
  text-transform: uppercase;
}

.meter {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.meter-label {
  font-size: 12px;
  font-family: var(--font-crt);
  color: var(--dim);
  width: 60px;
  text-align: right;
}

.meter-bar {
  width: 120px;
  height: 8px;
  background: #0a0a0a;
  border-radius: 5px;
  overflow: hidden;
  border: 1px solid #1a1a1a;
}

.meter-fill {
  height: 100%;
  transition: width 1s var(--ease-smooth);
  border-radius: 4px;
}

.meter-fill.trust {
  background: linear-gradient(90deg, var(--earth-deep), var(--earth-glow));
  box-shadow: 0 0 12px rgba(154, 112, 80, 0.4);
}

.meter-fill.guard {
  background: linear-gradient(90deg, #252530, #454555);
}

.meter-value {
  font-size: 14px;
  font-family: var(--font-crt);
  color: var(--earth-pale);
  min-width: 32px;
}

/* ═══════════════════════════════════════════════════════════════════
   ★ CONTINUE PROMPT — FIXED with dedicated overlay
   ═══════════════════════════════════════════════════════════════════ */
#continue-overlay {
  position: fixed;
  inset: 0;
  z-index: 198;
  cursor: pointer;
  background: transparent;
  display: none;
}

#continue-overlay.show {
  display: block;
}

.continue-prompt {
  position: fixed;
  bottom: clamp(24px, 5vh, 48px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 199;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s var(--ease-smooth);
}

.continue-prompt.show {
  opacity: 1;
  pointer-events: auto;
}

.continue-text {
  color: var(--gold);
  font-family: var(--font-crt);
  font-size: 0.9rem;
  letter-spacing: 3px;
  animation: promptPulse 3s ease-in-out infinite;
}

@keyframes promptPulse {
  0%, 100% { opacity: 0.45; transform: translateY(0); }
  50% { opacity: 1; transform: translateY(-5px); }
}

.continue-icon {
  width: 48px;
  height: 48px;
  border: 2px solid var(--gold);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: iconPulse 2.5s ease-in-out infinite;
  background: rgba(0, 0, 0, 0.4);
}

@keyframes iconPulse {
  0%, 100% { transform: scale(1); opacity: 0.65; }
  50% { transform: scale(1.15); opacity: 1; }
}

.continue-icon svg {
  width: 22px;
  height: 22px;
  fill: var(--gold);
  transform: rotate(90deg);
}

/* ═══════════════════════════════════════════════════════════════════
   VISUAL EFFECTS
   ═══════════════════════════════════════════════════════════════════ */
.glitch-overlay {
  position: fixed;
  inset: 0;
  z-index: 200;
  pointer-events: none;
  opacity: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 80, 128, 0.12) 2px,
    rgba(255, 80, 128, 0.12) 4px
  );
  transition: opacity 0.3s;
}

.glitch-overlay.on {
  opacity: 1;
  animation: glitchFlash 0.2s ease-out;
}

@keyframes glitchFlash {
  0% { opacity: 0.6; }
  100% { opacity: 0; }
}

.emotional-pulse {
  position: fixed;
  inset: 0;
  z-index: 150;
  pointer-events: none;
  opacity: 0;
  background: radial-gradient(
    circle at var(--cx, 50%) var(--cy, 50%),
    rgba(154, 112, 80, 0.25) 0%,
    transparent 55%
  );
  transition: opacity 2s;
}

.emotional-pulse.on {
  opacity: 1;
  animation: pulseExpand 3s ease-out;
}

@keyframes pulseExpand {
  0% { transform: scale(0.3); opacity: 0; }
  35% { opacity: 1; }
  100% { transform: scale(3); opacity: 0; }
}

.screen-shake {
  animation: screenShake 0.7s ease-out;
}

@keyframes screenShake {
  0%, 100% { transform: translate(0); }
  10% { transform: translate(-4px, 3px); }
  30% { transform: translate(4px, -3px); }
  50% { transform: translate(-3px, 4px); }
  70% { transform: translate(3px, -4px); }
  90% { transform: translate(-2px, 2px); }
}

@keyframes shake {
  10%, 90% { transform: translate(-3px); }
  20%, 80% { transform: translate(3px); }
  30%, 50%, 70% { transform: translate(-5px); }
  40%, 60% { transform: translate(5px); }
}

/* ═══════════════════════════════════════════════════════════════════
   AUDIO & MISC
   ═══════════════════════════════════════════════════════════════════ */
.audio-btn {
  position: fixed;
  top: 14px;
  right: 14px;
  z-index: 200;
  background: rgba(0, 0, 0, 0.75);
  border: 1px solid #2a2520;
  border-radius: 5px;
  color: var(--dim);
  font-family: var(--font-crt);
  font-size: 12px;
  padding: 6px 14px;
  cursor: pointer;
  transition: all 0.5s var(--ease-smooth);
}

.audio-btn:hover,
.audio-btn.on {
  color: var(--earth-glow);
  border-color: var(--earth);
  box-shadow: 0 0 20px rgba(154, 112, 80, 0.25);
}

.touch-ripple {
  position: fixed;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  border: 2px solid var(--earth);
  animation: touchRipple 1s ease-out forwards;
  opacity: 0;
}

@keyframes touchRipple {
  0% { transform: scale(0); opacity: 0.65; }
  100% { transform: scale(5); opacity: 0; }
}

.rating-badge {
  position: fixed;
  bottom: 24px;
  left: 24px;
  background: rgba(0, 0, 0, 0.65);
  padding: 8px 16px;
  border-radius: 5px;
  border: 1px solid #2a2520;
  font-family: var(--font-crt);
  font-size: 11px;
  color: var(--earth-pale);
  z-index: 50;
  opacity: 0;
  transition: opacity 1.4s;
}

.rating-badge.show { opacity: 0.55; }

/* ═══════════════════════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════════════════════ */
@media (max-width: 600px) {
  .main { padding: 85px 20px 45px; }
  .choices { gap: 14px; }
  .choice { padding: 16px 20px; }
  .match-grid { gap: 12px; }
  .match-card { font-size: 0.7rem; }
  .continue-prompt { bottom: 22px; }
  .phone-svg { width: clamp(240px, 45vw, 300px); }
}
</style>
</head>
<body>

<!-- Loading Overlay -->
<div id="loading-overlay">
  <svg class="seed-loading" viewBox="0 0 100 100">
    <defs>
      <radialGradient id="sgLoad" cx="50%" cy="50%">
        <stop offset="0%" stop-color="#a8e6a3" stop-opacity="0.75"/>
        <stop offset="100%" stop-color="#558b2f" stop-opacity="0.3"/>
      </radialGradient>
      <filter id="seedGlow">
        <feGaussianBlur stdDeviation="2.5" result="blur"/>
        <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
    </defs>
    <ellipse cx="50" cy="50" rx="22" ry="35" fill="url(#sgLoad)" transform="rotate(-15 50 50)" filter="url(#seedGlow)">
      <animate attributeName="ry" values="35;38;35" dur="3.5s" repeatCount="indefinite"/>
    </ellipse>
    <ellipse cx="50" cy="34" rx="8" ry="5" fill="#c8e6c9" transform="rotate(-15 50 34)"/>
    <path d="M38 16 Q50 2 62 16" stroke="#81c784" stroke-width="3" fill="none" stroke-linecap="round">
      <animate attributeName="d" values="M38 16 Q50 2 62 16;M38 12 Q50 -2 62 12;M38 16 Q50 2 62 16" dur="3.5s" repeatCount="indefinite"/>
    </path>
  </svg>
  <h1>SIDE A: SOIL</h1>
  <div class="sub">where it all began</div>
  <div class="boot-text" id="boot-text"></div>
</div>

<!-- Main CRT Screen -->
<div class="crt-screen">
  <div class="scan-bar"></div>
  <div class="tracking-bar" id="tracking"></div>
  
  <div id="vhs-layer"><canvas id="vhs-canvas"></canvas></div>
  <div id="noise-layer"></div>
  <div id="particles"></div>
  
  <!-- Background Scenes -->
  <div id="bg-scenes">
    <!-- Scene: Seed Growing with fireflies -->
    <div class="bg-scene scene-seed active" data-scene="0">
      <svg viewBox="0 0 400 300" preserveAspectRatio="xMidYMid slice">
        <defs>
          <linearGradient id="soilGrad" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stop-color="#2d1f15"/>
            <stop offset="60%" stop-color="#1a0f08"/>
            <stop offset="100%" stop-color="#0a0503"/>
          </linearGradient>
          <linearGradient id="stemGrad" x1="0%" y1="100%" x2="0%" y2="0%">
            <stop offset="0%" stop-color="#3a5a28" stop-opacity="0.8"/>
            <stop offset="100%" stop-color="#7ab858" stop-opacity="0.7"/>
          </linearGradient>
          <radialGradient id="flowerGrad" cx="50%" cy="50%">
            <stop offset="0%" stop-color="#ffb8d0" stop-opacity="0.9"/>
            <stop offset="100%" stop-color="#ff6090" stop-opacity="0.7"/>
          </radialGradient>
          <radialGradient id="glowAura" cx="50%" cy="35%">
            <stop offset="0%" stop-color="#7ab858" stop-opacity="0.25"/>
            <stop offset="100%" stop-color="transparent"/>
          </radialGradient>
          <filter id="softGlow">
            <feGaussianBlur stdDeviation="3" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
        
        <!-- Sky with stars -->
        <rect x="0" y="0" width="400" height="200" fill="#030308"/>
        <circle cx="50" cy="30" r="1" fill="#fff" opacity="0.4"/>
        <circle cx="120" cy="50" r="0.8" fill="#fff" opacity="0.3"/>
        <circle cx="280" cy="25" r="1.2" fill="#fff" opacity="0.5"/>
        <circle cx="350" cy="60" r="0.7" fill="#fff" opacity="0.35"/>
        <circle cx="180" cy="40" r="0.9" fill="#fff" opacity="0.45"/>
        
        <!-- Glow aura -->
        <ellipse class="glow-aura" cx="200" cy="80" rx="140" ry="110" fill="url(#glowAura)"/>
        
        <!-- Soil -->
        <rect class="soil" x="0" y="200" width="400" height="100" fill="url(#soilGrad)"/>
        
        <!-- Grass blades -->
        <g class="grass-group" opacity="0.4">
          <path class="grass" d="M40 200 Q45 175 38 155" stroke="#3a5a28" stroke-width="2" fill="none"/>
          <path class="grass" d="M90 200 Q98 168 85 145" stroke="#3a5a28" stroke-width="2.5" fill="none"/>
          <path class="grass" d="M310 200 Q318 172 308 148" stroke="#3a5a28" stroke-width="2" fill="none"/>
          <path class="grass" d="M360 200 368 170 355 140" stroke="#3a5a28" stroke-width="2.5" fill="none"/>
        </g>
        
        <!-- Roots -->
        <g class="roots" transform="translate(200, 200)">
          <path d="M0 0 Q-30 40 -60 70" stroke="#2a1510" stroke-width="5" fill="none" opacity="0.45"/>
          <path d="M0 0 Q25 50 45 85" stroke="#2a1510" stroke-width="5" fill="none" opacity="0.45"/>
          <path d="M0 0 Q-10 60 -25 95" stroke="#2a1510" stroke-width="3.5" fill="none" opacity="0.3"/>
          <path d="M0 0 Q15 55 30 90" stroke="#2a1510" stroke-width="3.5" fill="none" opacity="0.3"/>
        </g>
        
        <!-- Main stem -->
        <g transform="translate(200, 200)">
          <g class="main-stem">
            <g class="stem-segment"><path d="M0 0 Q-10 -45 0 -90" stroke="url(#stemGrad)" stroke-width="10" fill="none"/></g>
            <g class="stem-segment" transform="translate(0, -90)"><path d="M0 0 Q10 -40 0 -80" stroke="url(#stemGrad)" stroke-width="7" fill="none"/></g>
          </g>
          
          <!-- Lower leaves -->
          <g transform="translate(0, -60)">
            <path class="leaf" d="M0 0 Q-45 -22 -60 18 Q-38 28 0 10 Z" fill="url(#stemGrad)"/>
            <path class="leaf" d="M0 0 Q45 -22 60 18 Q38 28 0 10 Z" fill="url(#stemGrad)"/>
          </g>
          
          <!-- Upper leaves -->
          <g transform="translate(0, -110)">
            <path class="leaf" d="M0 0 Q-38 -14 -52 14 Q-32 22 0 8 Z" fill="url(#stemGrad)"/>
            <path class="leaf" d="M0 0 Q38 -14 52 14 Q32 22 0 8 Z" fill="url(#stemGrad)"/>
          </g>
        </g>
        
        <!-- Flower -->
        <g transform="translate(200, 70)" filter="url(#softGlow)">
          <ellipse class="petal" cx="0" cy="-28" rx="16" ry="32" fill="url(#flowerGrad)"/>
          <ellipse class="petal" cx="27" cy="-9" rx="16" ry="32" fill="url(#flowerGrad)" transform="rotate(72)"/>
          <ellipse class="petal" cx="17" cy="23" rx="16" ry="32" fill="url(#flowerGrad)" transform="rotate(144)"/>
          <ellipse class="petal" cx="-17" cy="23" rx="16" ry="32" fill="url(#flowerGrad)" transform="rotate(216)"/>
          <ellipse class="petal" cx="-27" cy="-9" rx="16" ry="32" fill="url(#flowerGrad)" transform="rotate(288)"/>
          <circle class="flower-center" cx="0" cy="0" r="14" fill="#e8b840" opacity="0.8"/>
        </g>
        
        <!-- Pollen particles -->
        <circle class="pollen" cx="165" cy="55" r="3" fill="#e8d080" opacity="0.55"/>
        <circle class="pollen" cx="235" cy="45" r="2.5" fill="#e8d080" opacity="0.45"/>
        <circle class="pollen" cx="200" cy="35" r="3" fill="#e8d080" opacity="0.6"/>
        <circle class="pollen" cx="180" cy="75" r="2" fill="#e8d080" opacity="0.35"/>
        <circle class="pollen" cx="220" cy="65" r="2.5" fill="#e8d080" opacity="0.5"/>
        
        <!-- Water drops -->
        <ellipse class="water-drop" cx="130" cy="100" rx="3" ry="7" fill="#5588bb" opacity="0.4"/>
        <ellipse class="water-drop" cx="270" cy="110" rx="2.5" ry="5" fill="#5588bb" opacity="0.35"/>
        <ellipse class="water-drop" cx="175" cy="130" rx="2" ry="5" fill="#5588bb" opacity="0.3"/>
        
        <!-- Fireflies -->
        <circle class="firefly" cx="80" cy="80" r="3" fill="#ffffaa" opacity="0"/>
        <circle class="firefly" cx="320" cy="100" r="2.5" fill="#ffffcc" opacity="0"/>
        <circle class="firefly" cx="150" cy="120" r="2" fill="#ffffaa" opacity="0"/>
        <circle class="firefly" cx="250" cy="85" r="2.5" fill="#ffffcc" opacity="0"/>
        <circle class="firefly" cx="100" cy="140" r="2" fill="#ffffaa" opacity="0"/>
        <circle class="firefly" cx="300" cy="140" r="2.5" fill="#ffffcc" opacity="0"/>
        
        <!-- Butterflies -->
        <g class="butterfly" transform="translate(65, 90)">
          <ellipse class="butterfly-wing" cx="-10" cy="0" rx="10" ry="6" fill="#ff6090" opacity="0.55"/>
          <ellipse class="butterfly-wing" cx="10" cy="0" rx="10" ry="6" fill="#ff6090" opacity="0.55"/>
          <ellipse cx="0" cy="0" rx="2.5" ry="6" fill="#802845" opacity="0.65"/>
        </g>
        <g class="butterfly" transform="translate(320, 125)" style="animation-delay: 6s;">
          <ellipse class="butterfly-wing" cx="-7" cy="0" rx="7" ry="4" fill="#ffb8d0" opacity="0.45"/>
          <ellipse class="butterfly-wing" cx="7" cy="0" rx="7" ry="4" fill="#ffb8d0" opacity="0.45"/>
          <ellipse cx="0" cy="0" rx="2" ry="4.5" fill="#b04865" opacity="0.55"/>
        </g>
      </svg>
    </div>
  </div>
  
  <!-- Phone SVG Asset -->
  <div id="phone-container">
    <svg class="phone-svg" viewBox="0 0 280 560" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="phoneBody" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#252525"/>
          <stop offset="50%" stop-color="#151515"/>
          <stop offset="100%" stop-color="#0a0a0a"/>
        </linearGradient>
        <linearGradient id="phoneScreen" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="#0f0f0f"/>
          <stop offset="100%" stop-color="#050505"/>
        </linearGradient>
        <linearGradient id="snapYellow" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="#FFFC00"/>
          <stop offset="100%" stop-color="#E0D000"/>
        </linearGradient>
        <filter id="phoneShadow">
          <feDropShadow dx="0" dy="0" stdDeviation="8" flood-opacity="0.5"/>
        </filter>
      </defs>
      
      <!-- Phone body -->
      <rect x="12" y="12" width="256" height="536" rx="40" fill="url(#phoneBody)" stroke="#333" stroke-width="2" filter="url(#phoneShadow)"/>
      
      <!-- Screen bezel -->
      <rect x="20" y="65" width="240" height="430" rx="8" fill="#080808" stroke="#222" stroke-width="1"/>
      
      <!-- Screen -->
      <rect x="24" y="69" width="232" height="422" rx="6" fill="url(#phoneScreen)"/>
      
      <!-- Notch -->
      <rect x="95" y="24" width="90" height="32" rx="16" fill="#0a0a0a"/>
      <circle cx="140" cy="40" r="7" fill="#151515"/>
      <circle cx="140" cy="40" r="4" fill="#1a1a1a"/>
      
      <!-- Snapchat header -->
      <rect x="24" y="69" width="232" height="55" fill="url(#snapYellow)" rx="6"/>
      
      <!-- Ghost icon -->
      <g transform="translate(44, 78)">
        <path d="M16 6 Q16 0 22 0 Q28 0 28 6 L28 24 Q28 32 22 32 Q19 32 18 29 L16 26 L14 29 Q13 32 10 32 Q4 32 4 24 L4 6 Q4 0 10 0 Q16 0 16 6 Z" fill="#fff" transform="scale(0.9)"/>
      </g>
      <text x="140" y="102" text-anchor="middle" font-family="'Space Mono', monospace" font-size="16" font-weight="700" fill="#1a1a1a">Snapchat</text>
      
      <!-- Message area placeholder -->
      <g id="phone-messages"></g>
      
      <!-- Time -->
      <text x="140" y="52" text-anchor="middle" id="phone-time" font-family="'Space Mono', monospace" font-size="14" fill="#666">2:47 PM</text>
      
      <!-- Home indicator -->
      <rect x="105" y="475" width="70" height="6" rx="3" fill="#333"/>
    </svg>
  </div>
  
  <!-- Effects -->
  <div class="glitch-overlay" id="glitch"></div>
  <div class="emotional-pulse" id="pulse"></div>
  
  <!-- Header -->
  <div class="header">
    <a href="index.html" class="back-btn">◀ EJECT</a>
    <div class="tape-label">SIDE A: SOIL</div>
    <div class="scene-counter" id="counter"></div>
  </div>
  
  <!-- Audio button -->
  <button class="audio-btn" id="audio-btn">♪ SOUND OFF</button>
  
  <!-- Main content -->
  <div class="main" id="main">
    <div class="sheepy-container" id="sheepy">
      <div class="sheepy-glow" id="sglow"></div>
      <div class="sheepy-text" id="stxt"></div>
      <div class="sheepy-controls" id="sheepy-controls">
        <button class="speed-btn active" data-speed="slow">Slow</button>
        <button class="speed-btn" data-speed="normal">Normal</button>
        <button class="speed-btn" data-speed="fast">Fast</button>
      </div>
    </div>
    <div class="scene" id="scene"></div>
    <div class="choices" id="choices"></div>
    <div class="match-container" id="match" style="display: none;"></div>
  </div>
  
  <!-- HUD -->
  <div class="hud" id="hud">
    <div class="hud-title">Emotional State</div>
    <div class="meter">
      <span class="meter-label">TRUST</span>
      <div class="meter-bar"><div class="meter-fill trust" id="tbar" style="width: 0%;"></div></div>
      <span class="meter-value" id="tval">0</span>
    </div>
    <div class="meter">
      <span class="meter-label">GUARD</span>
      <div class="meter-bar"><div class="meter-fill guard" id="gbar" style="width: 0%;"></div></div>
      <span class="meter-value" id="gval">0</span>
    </div>
  </div>
  
  <!-- ★ Continue Overlay (invisible click target) -->
  <div id="continue-overlay"></div>
  
  <!-- Continue Prompt -->
  <div class="continue-prompt" id="continue-prompt">
    <div class="continue-text">TAP TO CONTINUE</div>
    <div class="continue-icon">
      <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
    </div>
  </div>
  
  <div class="rating-badge" id="rating">SIDE A: SOIL</div>
</div>

<script>
'use strict';

/* ═══════════════════════════════════════════════════════════════════
   UTILITIES
   ═══════════════════════════════════════════════════════════════════ */
const $ = id => document.getElementById(id);
const sleep = ms => new Promise(r => setTimeout(r, ms));
const clamp = (v, lo, hi) => Math.max(lo, Math.min(hi, v));

/* Text speed — DEFAULT TO SLOW for readability */
const SPEEDS = { slow: 55, normal: 36, fast: 18 };
let textSpeed = 'slow';

/* ═══════════════════════════════════════════════════════════════════
   STATE MANAGEMENT
   ═══════════════════════════════════════════════════════════════════ */
const FX_DEF = {
  e_trust_1:{t:'stat',s:'trust',d:1},e_trust_2:{t:'stat',s:'trust',d:2},e_trust_3:{t:'stat',s:'trust',d:3},
  e_guard_1:{t:'stat',s:'guard',d:1},e_guard_2:{t:'stat',s:'guard',d:2},
  e_replied_fast:{t:'flag'},e_replied_slow:{t:'flag'},
  e_first_impression_eager:{t:'flag'},e_first_impression_guarded:{t:'flag'},e_first_impression_passive:{t:'flag'},
  e_hesitated:{t:'flag'},e_honesty_moment:{t:'flag'},e_tension_built:{t:'flag'},
  e_caught_smiling:{t:'flag'},e_warmth_shown:{t:'flag'},e_curious:{t:'flag'},
  e_learning_her_language:{t:'flag'},e_sought_connection:{t:'flag'},
  e_time_invested:{t:'flag'},e_shared_laughter:{t:'flag'},e_game_memory:{t:'flag'},
  e_observer_role:{t:'flag'},e_vulnerability_shown:{t:'flag'},e_playful_dynamic:{t:'flag'},
  e_physical_contact:{t:'flag'},e_intimacy_first:{t:'flag'},e_crossed_boundary:{t:'flag'},
  e_distance_kept:{t:'flag'},e_safety_chose:{t:'flag'},e_observer_deepened:{t:'flag'},e_silent_caring:{t:'flag'},
  e_voice_heard_3am:{t:'flag'},e_sunrise_together:{t:'flag'},e_missed_moment:{t:'flag'},
  e_voice_shared:{t:'flag'},e_intimate_medium:{t:'flag'},
  e_territorial:{t:'flag'},e_claimed_space:{t:'flag'},e_jealousy_shown:{t:'flag'},
  e_jealousy_hidden:{t:'flag'},e_sought_place:{t:'flag'},e_different_answer:{t:'flag'},
  e_mask_worn:{t:'flag'},e_feeling_denied:{t:'flag'},
  e_fear_chose:{t:'flag'},e_retreated:{t:'flag'},e_committed:{t:'flag'},e_patience_shown:{t:'flag'},
  e_soil_rich:{t:'arc'},e_soil_rocky:{t:'arc'},e_soil_barren:{t:'arc'},
  e_high_stakes:{t:'flag'},e_full_investment:{t:'flag'},e_cautious_hope:{t:'flag'},
  e_waiting_still:{t:'flag'},e_time_needed:{t:'flag'},
  e_tiktok_bond:{t:'flag'},e_discord_server:{t:'flag'},e_video_exchange:{t:'flag'},e_snapchat_daily:{t:'flag'}
};

const DEC_DEF = {
  d_tape1_reply_speed:{o:[
    {id:'reply_immediately',fx:['e_trust_1','e_replied_fast','e_first_impression_eager']},
    {id:'wait_hours',fx:['e_guard_1','e_replied_slow','e_first_impression_guarded']},
    {id:'stare_screen',fx:['e_replied_slow','e_first_impression_passive','e_hesitated']}
  ]},
  d_tape1_sigma_reaction:{o:[
    {id:'call_annoying',fx:['e_guard_1','e_honesty_moment','e_tension_built']},
    {id:'say_nothing_smile',fx:['e_trust_1','e_caught_smiling','e_warmth_shown']},
    {id:'ask_meaning',fx:['e_curious','e_learning_her_language','e_sought_connection']}
  ]},
  d_tape1_platform:{o:[
    {id:'tiktok',fx:['e_trust_1','e_tiktok_bond','e_video_exchange']},
    {id:'discord',fx:['e_guard_1','e_discord_server','e_observer_role']},
    {id:'snapchat',fx:['e_trust_1','e_snapchat_daily','e_sought_connection']}
  ]},
  d_tape1_princess_tycoon:{o:[
    {id:'play_complain',fx:['e_trust_1','e_time_invested','e_shared_laughter','e_game_memory']},
    {id:'refuse_watch',fx:['e_guard_1','e_observer_role','e_game_memory']},
    {id:'make_challenge',fx:['e_trust_1','e_vulnerability_shown','e_playful_dynamic','e_game_memory']}
  ]},
  d_tape1_scratch:{o:[
    {id:'take_hand',fx:['e_trust_2','e_physical_contact','e_intimacy_first','e_crossed_boundary']},
    {id:'look_away',fx:['e_guard_1','e_distance_kept','e_safety_chose']},
    {id:'file_away',fx:['e_observer_deepened','e_silent_caring']}
  ]},
  d_tape1_late_night:{o:[
    {id:'voice_note',fx:['e_trust_2','e_vulnerability_shown','e_voice_shared','e_intimate_medium']},
    {id:'text_back_safe',fx:['e_guard_1','e_safety_chose','e_missed_moment']},
    {id:'stay_up_talking',fx:['e_trust_2','e_sunrise_together','e_time_invested']}
  ]},
  d_tape1_jealousy:{o:[
    {id:'tell_her_busy',fx:['e_guard_1','e_territorial','e_claimed_space','e_jealousy_shown']},
    {id:'annoying_how',fx:['e_trust_1','e_sought_place','e_jealousy_shown','e_different_answer']},
    {id:'change_subject',fx:['e_mask_worn','e_jealousy_hidden','e_feeling_denied']}
  ]},
  d_tape1_realization:{o:[
    {id:'pull_back',fx:['e_guard_2','e_fear_chose','e_retreated']},
    {id:'lean_in',fx:['e_trust_2','e_vulnerability_shown','e_committed']},
    {id:'watch_grow',fx:['e_observer_deepened','e_patience_shown']}
  ]},
  d_tape1_soil_choice:{o:[
    {id:'rich_soil',fx:['e_trust_3','e_soil_rich','e_high_stakes','e_full_investment']},
    {id:'rocky_soil',fx:['e_guard_2','e_soil_rocky','e_cautious_hope']},
    {id:'barren_soil',fx:['e_soil_barren','e_waiting_still','e_time_needed']}
  ]}
};

const State = {
  trust:0, guard:0, flags:new Set(), choices:{},
  apply(ids) {
    const r=[];
    for(const id of ids){
      const e=FX_DEF[id]; if(!e) continue;
      if(e.t==='stat'){this[e.s]=clamp(this[e.s]+e.d,0,100);r.push({type:'stat',stat:e.s,delta:e.d})}
      else{this.flags.add(id);r.push({type:e.t,id})}
    }
    return r;
  },
  has(id){return this.flags.has(id)},
  save(){
    try{
      const s=JSON.parse(localStorage.getItem('seed_archive_v3')||'{}');
      s.tape1={complete:true,trust:this.trust,guard:this.guard,
        soil:this.has('e_soil_rich')?'rich':this.has('e_soil_rocky')?'rocky':'barren',
        flags:[...this.flags]};
      localStorage.setItem('seed_archive_v3',JSON.stringify(s));
    }catch{}
  },
  updateHUD(){
    $('tbar').style.width=Math.min(this.trust,100)+'%';
    $('gbar').style.width=Math.min(this.guard,100)+'%';
    $('tval').textContent=this.trust;
    $('gval').textContent=this.guard;
  }
};

/* ═══════════════════════════════════════════════════════════════════
   AUDIO — Unique characterful sounds
   ═══════════════════════════════════════════════════════════════════ */
const Snd = {
  ctx:null, master:null, on:false, musicNodes:[],
  
  init(){
    if(this.ctx)return;
    this.ctx=new(window.AudioContext||window.webkitAudioContext)();
    this.master=this.ctx.createGain();
    this.master.gain.value=0;
    this.master.connect(this.ctx.destination);
  },
  
  resume(){if(this.ctx?.state==='suspended')this.ctx.resume()},
  
  vol(v,t=0.5){
    if(!this.master)return;
    const now=this.ctx.currentTime;
    this.master.gain.cancelScheduledValues(now);
    this.master.gain.setValueAtTime(this.master.gain.value,now);
    this.master.gain.linearRampToValueAtTime(v,now+t);
  },
  
  _osc(freq,dur,type='sine',vol=0.05,delay=0){
    if(!this.ctx||!this.on)return;
    const t=this.ctx.currentTime+delay;
    const o=this.ctx.createOscillator(),g=this.ctx.createGain();
    o.type=type;o.frequency.value=freq;
    g.gain.setValueAtTime(0,t);
    g.gain.linearRampToValueAtTime(vol,t+0.02);
    g.gain.exponentialRampToValueAtTime(0.001,t+dur);
    o.connect(g);g.connect(this.master);
    o.start(t);o.stop(t+dur+0.05);
  },
  
  _noise(dur,vol=0.04,delay=0){
    if(!this.ctx||!this.on)return;
    const sr=this.ctx.sampleRate,len=sr*dur|0;
    const buf=this.ctx.createBuffer(1,len,sr),d=buf.getChannelData(0);
    for(let i=0;i<len;i++)d[i]=(Math.random()*2-1)*Math.pow(1-i/len,1.8);
    const s=this.ctx.createBufferSource(),g=this.ctx.createGain();
    const t=this.ctx.currentTime+delay;
    s.buffer=buf;g.gain.setValueAtTime(vol,t);
    g.gain.exponentialRampToValueAtTime(0.001,t+dur);
    s.connect(g);g.connect(this.master);s.start(t);
  },
  
  // Warm typewriter tick
  type(){
    this._osc(700+Math.random()*600,0.02,'triangle',0.025);
    this._osc(1200+Math.random()*400,0.015,'sine',0.015);
  },
  
  // Soft click
  click(){
    this._osc(550,0.05,'sine',0.08);
    this._osc(850,0.035,'sine',0.04,0.025);
  },
  
  // Rising shimmer
  hover(){
    this._osc(350,0.1,'sine',0.03);
    this._osc(550,0.07,'sine',0.02,0.04);
  },
  
  // Dual-tone select
  select(){
    this._osc(420,0.18,'sine',0.07);
    this._osc(640,0.18,'sine',0.06,0.08);
  },
  
  // Emotional warmth — slow arpeggio
  emotional(){
    [210,265,320,385,440].forEach((f,i)=>{
      this._osc(f,0.9,'sine',0.05,i*0.15);
      this._osc(f*2,0.6,'triangle',0.02,i*0.15);
    });
  },
  
  // Digital corruption
  glitch(){
    this._noise(0.12,0.12);
    this._osc(70+Math.random()*80,0.15,'square',0.06);
  },
  
  // System boot
  powerOn(){
    this._osc(30,0.7,'sawtooth',0.05);
    this._osc(70,0.5,'sine',0.035,0.25);
    this._noise(0.35,0.07);
  },
  
  // Scene transition
  whoosh(){
    this._noise(0.4,0.05);
    this._osc(180,0.25,'sine',0.025,0.06);
    this._osc(380,0.18,'sine',0.02,0.12);
  },
  
  // Phone notification
  phoneNotify(){
    this._osc(750,0.1,'sine',0.09);
    this._osc(950,0.07,'sine',0.07,0.1);
    this._osc(750,0.1,'sine',0.055,0.2);
  },
  
  // Card flip
  flip(){
    this._osc(320,0.08,'triangle',0.05);
    this._osc(650,0.05,'sine',0.03,0.025);
  },
  
  // Match success chord
  match(){
    [385,515,650].forEach((f,i)=>{
      this._osc(f,0.4,'sine',0.055,i*0.1);
      this._osc(f*1.5,0.28,'triangle',0.025,i*0.1);
    });
  },
  
  // Wrong buzz
  wrong(){
    this._osc(105,0.25,'sawtooth',0.07);
    this._osc(112,0.25,'square',0.045);
    this._noise(0.15,0.06);
  },
  
  // Victory
  complete(){
    [385,485,575,770].forEach((f,i)=>this._osc(f,0.8,'sine',0.055,i*0.14));
  },
  
  // Continue ready
  continueReady(){
    this._osc(480,0.15,'sine',0.03);
    this._osc(620,0.12,'sine',0.025,0.1);
  },
  
  _bootCount:0,
  bootBeep(){
    this._bootCount++;
    if(this._bootCount%4!==0)return;
    this._osc(550+Math.random()*350,0.03,'square',0.02);
  },
  
  // Ambient drone
  startAmbient(){
    if(!this.ctx||!this.on)return;
    this.stopAmbient();
    const now=this.ctx.currentTime;
    const d=this.ctx.createOscillator(),dg=this.ctx.createGain();
    d.type='sine';d.frequency.value=52;
    dg.gain.setValueAtTime(0,now);dg.gain.linearRampToValueAtTime(0.05,now+5);
    d.connect(dg);dg.connect(this.master);d.start();
    this.musicNodes.push({n:d,g:dg});
    [105,158,210].forEach((f,i)=>{
      const o=this.ctx.createOscillator(),g=this.ctx.createGain();
      o.type='sine';o.frequency.value=f;
      const lfo=this.ctx.createOscillator(),lg=this.ctx.createGain();
      lfo.type='sine';lfo.frequency.value=0.07+Math.random()*0.12;lg.gain.value=2.5;
      lfo.connect(lg);lg.connect(o.frequency);lfo.start();
      g.gain.setValueAtTime(0,now);g.gain.linearRampToValueAtTime(0.014+i*0.004,now+7);
      o.connect(g);g.connect(this.master);o.start();
      this.musicNodes.push({n:o,g,lfo});
    });
  },
  
  stopAmbient(){
    const now=this.ctx?.currentTime||0;
    this.musicNodes.forEach(({n,g,lfo})=>{
      try{g?.gain?.linearRampToValueAtTime(0,now+3);
        setTimeout(()=>{try{n.stop()}catch{};if(lfo)try{lfo.stop()}catch{}},3500);
      }catch{}
    });
    this.musicNodes=[];
  },
  
  ensure(){
    this.init();this.resume();
    if(!this.on){
      this.on=true;this.vol(0.5,1.2);
      $('audio-btn').textContent='♪ SOUND ON';
      $('audio-btn').classList.add('on');
      this.startAmbient();
    }
  },
  
  toggle(){
    this.init();this.resume();
    this.on=!this.on;
    if(this.on){this.vol(0.5,1);$('audio-btn').textContent='♪ SOUND ON';$('audio-btn').classList.add('on');this.startAmbient()}
    else{this.vol(0,0.6);$('audio-btn').textContent='♪ SOUND OFF';$('audio-btn').classList.remove('on');this.stopAmbient()}
  }
};

/* ═══════════════════════════════════════════════════════════════════
   VHS BACKGROUND
   ═══════════════════════════════════════════════════════════════════ */
const VHS = {
  canvas:null,ctx:null,w:0,h:0,pts:[],
  init(){
    this.canvas=$('vhs-canvas');this.ctx=this.canvas.getContext('2d');
    this.resize();window.addEventListener('resize',()=>this.resize());
    for(let i=0;i<55;i++)this.pts.push({
      x:Math.random()*this.w,y:Math.random()*this.h,
      vx:(Math.random()-0.5)*0.4,vy:-0.14-Math.random()*0.28,
      sz:1.2+Math.random()*5,op:0.018+Math.random()*0.06,
      ph:Math.random()*6.28
    });
    this.loop();
  },
  resize(){this.w=this.canvas.width=innerWidth;this.h=this.canvas.height=innerHeight},
  loop(){
    const c=this.ctx;if(!this.w){requestAnimationFrame(()=>this.loop());return}
    c.fillStyle='rgba(3,3,3,0.07)';c.fillRect(0,0,this.w,this.h);
    for(const p of this.pts){
      p.x+=p.vx+Math.sin(p.ph+=0.0035)*0.45;p.y+=p.vy;
      if(p.y<-18){p.y=this.h+18;p.x=Math.random()*this.w}
      if(p.x<-18)p.x=this.w+18;if(p.x>this.w+18)p.x=-18;
      c.beginPath();c.arc(p.x,p.y,p.sz,0,6.28);
      c.fillStyle=`rgba(154,112,80,${p.op})`;c.fill();
    }
    if(Math.random()<0.012){
      c.fillStyle='rgba(154,112,80,0.018)';
      c.fillRect(0,Math.random()*this.h,this.w,3+Math.random()*10);
    }
    requestAnimationFrame(()=>this.loop());
  }
};

/* ═══════════════════════════════════════════════════════════════════
   PARTICLES
   ═══════════════════════════════════════════════════════════════════ */
const Dust = {
  pool:[],anims:[],idx:0,iv:null,
  init(){
    for(let i=0;i<25;i++){
      const p=document.createElement('div');p.className='particle';
      p.style.cssText='opacity:0;width:4px;height:4px';
      $('particles').appendChild(p);this.pool.push(p);this.anims.push(null);
    }
  },
  spawn(){
    const i=this.idx++%25;if(this.anims[i])this.anims[i].cancel();
    const p=this.pool[i],sz=2.5+Math.random()*6,dur=14000+Math.random()*18000;
    const dx=(Math.random()-0.5)*100,op=0.035+Math.random()*0.12;
    p.style.cssText=`left:${Math.random()*100}%;bottom:-14px;width:${sz}px;height:${sz}px;background:radial-gradient(circle,rgba(154,112,80,0.22),transparent);opacity:0`;
    this.anims[i]=p.animate([
      {transform:'translateY(0) translateX(0)',opacity:0},
      {opacity:op,offset:0.1},{opacity:op,offset:0.88},
      {transform:`translateY(calc(-100vh - 28px)) translateX(${dx}px)`,opacity:0}
    ],{duration:dur,fill:'forwards'});
  },
  start(){if(!this.iv)this.iv=setInterval(()=>this.spawn(),1600)},
  stop(){clearInterval(this.iv);this.iv=null}
};

/* Touch ripple */
document.addEventListener('pointerdown',e=>{
  const r=document.createElement('div');r.className='touch-ripple';
  r.style.left=(e.clientX-24)+'px';r.style.top=(e.clientY-24)+'px';
  r.style.width=r.style.height='48px';
  document.body.appendChild(r);setTimeout(()=>r.remove(),1000);
},{passive:true});

/* ═══════════════════════════════════════════════════════════════════
   PHONE DISPLAY
   ═══════════════════════════════════════════════════════════════════ */
const Phone = {
  show(){ $('phone-container').classList.add('show'); },
  hide(){ $('phone-container').classList.remove('show'); },
  setTime(t){ $('phone-time').textContent=t; },
  setMessages(msgs){
    const g=document.getElementById('phone-messages');
    if(!g)return; g.innerHTML='';
    let y=135;
    msgs.forEach(m=>{
      const isHer=!!m.her;
      const bg=document.createElementNS('http://www.w3.org/2000/svg','rect');
      bg.setAttribute('x',isHer?'32':'62');bg.setAttribute('y',String(y));
      bg.setAttribute('width','190');bg.setAttribute('height','48');bg.setAttribute('rx','16');
      bg.setAttribute('fill',isHer?'#2a1220':'#122218');
      g.appendChild(bg);
      const txt=document.createElementNS('http://www.w3.org/2000/svg','text');
      txt.setAttribute('x',isHer?'46':'76');txt.setAttribute('y',String(y+30));
      txt.setAttribute('font-family',"'Space Mono',monospace");
      txt.setAttribute('font-size','15');
      txt.setAttribute('fill',isHer?'#d87895':'#b89850');
      const maxLen=18;
      txt.textContent=m.text.length>maxLen?m.text.substring(0,maxLen)+'…':m.text;
      g.appendChild(txt);
      y+=62;
    });
  }
};

/* ═══════════════════════════════════════════════════════════════════
   SHEEPY — Slow default, breathing pauses
   ═══════════════════════════════════════════════════════════════════ */
const Sheepy = {
  mouths:{nervous:'M-6 6 Q-4 3 0 5 Q4 7 6 5',happy:'M-7 4 Q0 14 7 4',sad:'M-7 8 Q0 2 7 8',thoughtful:'M-5 5 Q0 8 5 5'},
  svg(sz,mood='nervous',hold=false){
    const m=this.mouths[mood]||this.mouths.nervous;
    return`<svg width="${sz}" height="${sz}" viewBox="0 0 120 120" style="animation:bounce 5s infinite"><ellipse cx="60" cy="78" rx="38" ry="30" fill="#e4dcd0"/><ellipse cx="36" cy="70" rx="14" ry="12" fill="#faf8f5"/><ellipse cx="84" cy="70" rx="14" ry="12" fill="#faf8f5"/><ellipse cx="60" cy="32" rx="22" ry="18" fill="#ffeef2"/><ellipse cx="30" cy="22" rx="8" ry="6" fill="#d0c4b8" transform="rotate(-20 30 22)"/><ellipse cx="90" cy="22" rx="8" ry="6" fill="#d0c4b8" transform="rotate(20 90 22)"/><ellipse cx="48" cy="30" rx="5" ry="6" fill="#1a1a1a"><animate attributeName="ry" values="6;6;1;6;6" keyTimes="0;.4;.5;.6;1" dur="5s" repeatCount="indefinite"/></ellipse><ellipse cx="72" cy="30" rx="5" ry="6" fill="#1a1a1a"><animate attributeName="ry" values="6;6;1;6;6" keyTimes="0;.4;.5;.6;1" dur="5s" repeatCount="indefinite"/></ellipse><circle cx="49" cy="28" r="2" fill="#fff"/><circle cx="73" cy="28" r="2" fill="#fff"/><ellipse cx="60" cy="44" rx="4" ry="3" fill="#b8a098"/><g transform="translate(60 52)"><path d="${m}" stroke="#a89088" stroke-width="2.5" fill="none" stroke-linecap="round"/></g>${hold?'<g transform="translate(78 52)"><rect width="24" height="18" rx="3" fill="#fff8e8" stroke="#705020"/><circle cx="12" cy="9" r="4" fill="#705020"/></g>':''}</svg>`;
  },
  show(mood,hold=false){$('sglow').innerHTML=this.svg(130,mood,hold)},
  async say(text){
    const spd=SPEEDS[textSpeed];
    const el=$('stxt');el.innerHTML='';
    for(let i=0;i<text.length;i++){
      if(text[i]==='<'){const j=text.indexOf('>',i);el.innerHTML+=text.substring(i,j+1);i=j}
      else{el.innerHTML+=text[i];Snd.type();await sleep(spd)}
    }
    await sleep(500);
  }
};

/* Speed controls — default slow highlighted */
document.querySelectorAll('.speed-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.speed-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    textSpeed=btn.dataset.speed;
    Snd.click();
  });
});

/* ═══════════════════════════════════════════════════════════════════
   ★ UI — FIXED CONTINUE PROMPT
   ═══════════════════════════════════════════════════════════════════ */
const UI = {
  scene:$('scene'), choices:$('choices'), match:$('match'),
  prompt:$('continue-prompt'), overlay:$('continue-overlay'),
  _resolver:null, _active:false,
  
  clear(){
    this.scene.innerHTML='';
    this.choices.innerHTML='';this.choices.classList.remove('show');
    this.match.style.display='none';
    this._hidePrompt();
  },
  
  p(html){
    const el=document.createElement('p');el.innerHTML=html;
    this.scene.appendChild(el);return el;
  },
  
  async show(el,dur=1000){
    el.classList.add('show');
    await sleep(dur);
  },
  
  _showPrompt(){
    this.prompt.classList.add('show');
    this.overlay.classList.add('show');
    this._active=true;
    Snd.continueReady();
  },
  
  _hidePrompt(){
    this.prompt.classList.remove('show');
    this.overlay.classList.remove('show');
    this._active=false;
  },
  
  waitClick(){
    return new Promise(resolve=>{
      setTimeout(()=>{
        this._resolver=resolve;
        this._showPrompt();
      },250);
    });
  },
  
  _handleTap(){
    if(!this._active||!this._resolver)return;
    const fn=this._resolver;
    this._resolver=null;
    this._hidePrompt();
    Snd.click();
    fn();
  }
};

/* Dedicated click targets */
$('continue-overlay').addEventListener('click',()=>UI._handleTap());
$('continue-overlay').addEventListener('touchend',e=>{e.preventDefault();UI._handleTap()});
$('continue-prompt').addEventListener('click',()=>UI._handleTap());
$('continue-prompt').addEventListener('touchend',e=>{e.preventDefault();UI._handleTap()});
document.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();UI._handleTap()}});

/* ═══════════════════════════════════════════════════════════════════
   VFX
   ═══════════════════════════════════════════════════════════════════ */
const VFX = {
  glitch(){$('glitch').classList.add('on');Snd.glitch();setTimeout(()=>$('glitch').classList.remove('on'),220)},
  pulse(){const el=$('pulse');el.classList.remove('on');void el.offsetWidth;el.classList.add('on');setTimeout(()=>el.classList.remove('on'),3000)},
  emotional(){Snd.emotional();this.pulse()},
  flash(){$('tracking').classList.add('on');setTimeout(()=>$('tracking').classList.remove('on'),1200)}
};

const updateCounter=(c,t)=>$('counter').textContent=`${c}/${t}`;

/* ═══════════════════════════════════════════════════════════════════
   CHOICES
   ═══════════════════════════════════════════════════════════════════ */
function choose(decId,opts){
  return new Promise(resolve=>{
    UI.choices.innerHTML='';
    const dec=DEC_DEF[decId];
    for(const opt of opts){
      const btn=document.createElement('button');btn.className='choice';
      btn.innerHTML=`<span class="choice-text">${opt.text}</span>`;
      if(opt.preview)btn.innerHTML+=`<span class="preview">${opt.preview}</span>`;
      btn.addEventListener('mouseenter',()=>Snd.hover());
      btn.onclick=()=>{
        Snd.select();
        document.querySelectorAll('.choice').forEach(b=>b.disabled=true);
        btn.classList.add('selected');
        const def=dec?.o?.find(o=>o.id===opt.id);
        if(def){
          const r=State.apply(def.fx);State.choices[decId]=opt.id;State.updateHUD();
          const td=r.filter(x=>x.type==='stat'&&x.stat==='trust').reduce((s,x)=>s+x.delta,0);
          const gd=r.filter(x=>x.type==='stat'&&x.stat==='guard').reduce((s,x)=>s+x.delta,0);
          let fx='';
          if(td>0)fx+=`Trust +${td}  `;if(gd>0)fx+=`Guard +${gd}`;
          if(fx)btn.innerHTML+=`<span class="effect">${fx.trim()}</span>`;
        }
        if(opt.emotional)VFX.emotional();
        setTimeout(()=>resolve(opt.id),1800);
      };
      UI.choices.appendChild(btn);
    }
    UI.choices.classList.add('show');
  });
}

/* ═══════════════════════════════════════════════════════════════════
   MEMORY MATCH
   ═══════════════════════════════════════════════════════════════════ */
const PAIRS=[
  {id:1,a:'snap add',b:'finger slip',story:'She\'ll call it an accident for months.'},
  {id:2,a:'"i\'m sigma"',b:'zero apology',story:'She walked in like she owned the place.'},
  {id:3,a:'princess tycoon',b:'two hours gone',story:'Seventeen turrets. She laughed at your shoebox.'},
  {id:4,a:'the scratch',b:'three seconds',story:'You held her hand for three seconds.'},
  {id:5,a:'tiktok videos',b:'always behind',story:'Her videos pile up. You never catch up.'},
  {id:6,a:'3:08 AM snap',b:'streak preserved',story:'The streak matters more than sleep.'},
  {id:7,a:'"he\'s annoying"',b:'jaw set',story:'Your body reacted before your brain.'},
  {id:8,a:'"whatever"',b:'screen saved',story:'You saved what you denied feeling.'}
];
const shuffle=a=>{for(let i=a.length-1;i>0;i--){const j=Math.random()*(i+1)|0;[a[i],a[j]]=[a[j],a[i]]}return a};

async function memoryMatch(){
  UI.clear();
  $('match').style.display='block';
  $('match').classList.add('show');
  $('match').innerHTML=`<div class="match-header"><div class="match-title">MEMORY MATCH</div><div class="match-subtitle">Each pair reveals something buried</div></div><div class="match-stakes"><div class="stake"><span class="stake-label">PAIRS</span><span class="stake-value" id="pc">0/8</span></div><div class="stake"><span class="stake-label">FOCUS</span><div class="hearts" id="hearts">${'<svg class="heart active" viewBox="0 0 14 14" width="16" height="16"><path d="M7 12 Q2 7 7 2 Q12 7 7 12" fill="currentColor"/></svg>'.repeat(3)}</div></div></div><div class="match-grid" id="mgrid"></div><div class="match-story" id="mstory"></div>`;
  const cards=[];PAIRS.forEach(p=>{cards.push({pid:p.id,text:p.a});cards.push({pid:p.id,text:p.b})});
  shuffle(cards);
  const grid=$('mgrid'),story=$('mstory');
  let flipped=[],matched=0,hearts=3,lock=false;
  const uh=()=>{$('hearts').querySelectorAll('.heart').forEach((x,i)=>{x.classList.toggle('lost',i>=hearts);x.classList.toggle('active',i<hearts)})};
  cards.forEach(c=>{
    const card=document.createElement('div');card.className='match-card';
    card.innerHTML=`<div class="card-inner">${c.text}</div>`;
    card.onclick=()=>{
      if(lock||card.classList.contains('flipped')||card.classList.contains('matched'))return;
      Snd.flip();card.classList.add('flipped');flipped.push({card,pid:c.pid});
      if(flipped.length===2){lock=true;
        if(flipped[0].pid===flipped[1].pid){
          Snd.match();matched++;
          const p=PAIRS.find(x=>x.id===flipped[0].pid);
          if(p){story.textContent=p.story;story.classList.add('show')}
          $('pc').textContent=`${matched}/8`;
          setTimeout(()=>{flipped.forEach(f=>f.card.classList.add('matched'));flipped=[];lock=false;
            if(matched>=8)setTimeout(()=>{VFX.emotional();Snd.complete()},700)},500);
        }else{
          hearts--;uh();Snd.wrong();flipped.forEach(f=>f.card.classList.add('wrong'));
          setTimeout(()=>{flipped.forEach(f=>f.card.classList.remove('flipped','wrong'));flipped=[];lock=false;
            if(hearts<=0){hearts=3;matched=0;uh();document.querySelectorAll('.match-card').forEach(c=>c.classList.remove('flipped','matched','wrong'));$('pc').textContent='0/8';story.textContent='Focus. These memories matter.';story.classList.add('show')}},900);
        }
      }
    };
    grid.appendChild(card);
  });
  return new Promise(r=>{const iv=setInterval(()=>{if(matched>=8){clearInterval(iv);setTimeout(r,1800)}},200)});
}

/* ═══════════════════════════════════════════════════════════════════
   BOOT
   ═══════════════════════════════════════════════════════════════════ */
async function typeBootLine(el,text,spd=22){
  for(let i=0;i<text.length;i++){el.textContent+=text[i];Snd.bootBeep();await sleep(spd)}
  el.textContent+='\n';
}

async function boot(){
  const bt=$('boot-text');
  await sleep(1400);
  await typeBootLine(bt,'> SEED ARCHIVE v3.0',18);await sleep(450);
  await typeBootLine(bt,'> LOADING SIDE A: SOIL...',20);await sleep(400);
  await typeBootLine(bt,'> 8 DECISIONS DETECTED',16);await sleep(350);
  await typeBootLine(bt,'> EMOTIONAL PAYLOAD: ARMED',18);await sleep(400);
  await typeBootLine(bt,'> SHEEPY PROTOCOL: ACTIVE',16);await sleep(350);
  Snd.ensure();Snd.powerOn();
  await typeBootLine(bt,'> READY.',28);
  const cur=document.createElement('span');cur.className='boot-cursor';bt.appendChild(cur);
  await sleep(1800);
  $('loading-overlay').classList.add('hidden');
  await sleep(3000);
  story();
}

/* ═══════════════════════════════════════════════════════════════════
   ★ MAIN STORY — Online only, never met in person
   ═══════════════════════════════════════════════════════════════════ */
async function story(){
  VHS.init();Dust.init();Dust.start();
  $('bg-scenes').classList.add('active');
  $('hud').classList.add('show');
  $('rating').classList.add('show');
  $('sheepy-controls').classList.add('show');
  State.updateHUD();
  const T=22;let idx=0,p;

  // ═══ ACT 1: THE SNAPCHAT ADD ═══
  idx++;updateCounter(idx,T);VFX.flash();
  
  $('sheepy').classList.add('show');
  Sheepy.show('nervous',true);
  await Sheepy.say('<span class="hand">baa.</span> Before this starts...');
  await sleep(700);
  await Sheepy.say('I need you to understand:');
  await sleep(400);
  await Sheepy.say('he almost didn\'t add her back.');
  await sleep(600);
  await Sheepy.say('<span class="whisper">That\'s the whole story.</span>');
  await sleep(900);
  $('sheepy').classList.add('hide');await sleep(800);$('sheepy').classList.remove('show','hide');

  UI.clear();

  p=UI.p('<span class="time">2:47 PM. Tuesday. Doing nothing important.</span>');
  await UI.show(p);await sleep(600);

  p=UI.p('<span class="narrator">Your phone buzzes. <span class="snapchat">Snapchat</span> notification.</span>');
  await UI.show(p);await sleep(500);

  p=UI.p('<span class="narrator">Someone added you by username.</span>');
  await UI.show(p);await sleep(500);

  Phone.setTime('2:47 PM');
  Phone.setMessages([{her:true,text:'omg wait wrong person'}]);
  Snd.phoneNotify();Phone.show();await sleep(1400);

  p=UI.p('<span class="snapchat">minji_added_you</span>');
  await UI.show(p);await sleep(500);

  Phone.hide();await sleep(400);

  p=UI.p('<span class="narrator">A finger slip. That\'s what she\'ll say.</span>');
  await UI.show(p);await sleep(600);

  p=UI.p('<span class="memory">You will think about this moment for months. The ordinary Tuesday that split your life in two.</span>');
  await UI.show(p,1200);
  await UI.waitClick();

  const c1=await choose('d_tape1_reply_speed',[
    {text:'Add back instantly. Send something sarcastic.',id:'reply_immediately',preview:'Curiosity dressed as humor',emotional:true},
    {text:'Wait three hours. Add back casually.',id:'wait_hours',preview:'Protection over connection'},
    {text:'Stare at the notification. Thumb hovering.',id:'stare_screen',preview:'Feeling before acting'}
  ]);

  // ═══ ACT 2: FIRST CONTACT ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c1==='reply_immediately'){
    Phone.setTime('2:48 PM');
    Phone.setMessages([{her:true,text:'omg wait wrong person'},{me:true,text:'lol who were u adding'}]);
    Phone.show();Snd.phoneNotify();await sleep(1400);Phone.hide();await sleep(400);
    p=UI.p('<span class="narrator">Forty-seven seconds. That\'s how fast you added back a stranger.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Later you\'ll tell yourself it was boredom. You weren\'t bored. You were curious.</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="me">There is a canyon between those two things.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Curiosity is just hope trying to look casual.</span>');await UI.show(p,1200);
  }else if(c1==='wait_hours'){
    p=UI.p('<span class="narrator">Three hours. You open the app four times. Close it twice.</span>');await UI.show(p);await sleep(600);
    Phone.setTime('5:52 PM');
    Phone.setMessages([{her:true,text:'omg wait wrong person'},{me:true,text:'happens to the best of us'}]);
    Phone.show();Snd.phoneNotify();await sleep(1300);Phone.hide();await sleep(400);
    p=UI.p('<span class="narrator">Six words. Eleven minutes of editing. She\'ll never know.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">The distance between what you feel and what you show could fill an ocean.</span>');await UI.show(p,1200);
  }else{
    p=UI.p('<span class="narrator">Your thumb hovers. Screen dims. Lock. Unlock. Lock.</span>');await UI.show(p);await sleep(600);
    Phone.setTime('3:12 PM');
    Phone.setMessages([{her:true,text:'omg wait wrong person'},{her:true,text:'hello?? u there lol'}]);
    Phone.show();Snd.phoneNotify();await sleep(1300);Phone.hide();await sleep(400);
    p=UI.p('<span class="me">She snapped again. She didn\'t have to. The universe chose for you.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Sometimes freezing is the most honest thing you can do. It means something already matters.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 3: PLATFORMS ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="narrator">Weeks pass. The conversation spreads across apps.</span>');
  await UI.show(p);await sleep(600);

  p=UI.p('<span class="narrator">Each platform a different version of the same story.</span>');
  await UI.show(p);await sleep(600);

  await UI.waitClick();

  const c2=await choose('d_tape1_platform',[
    {text:'TikTok. She found your personal. Videos pile up.',id:'tiktok',preview:'Endless content exchange'},
    {text:'Discord. Old servers. Quiet observation.',id:'discord',preview:'Watched from the margins'},
    {text:'Snapchat. Daily driver. Everything happens here.',id:'snapchat',preview:'The main thread',emotional:true}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c2==='tiktok'){
    p=UI.p('<span class="narrator">She found your personal account somehow. Started following.</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="narrator">Her videos pile up in your notifications. You\'re always behind schedule.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Every time you got busy, you\'d slowly progress toward thinking about her.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Content is just intimacy with plausible deniability.</span>');await UI.show(p,1200);
  }else if(c2==='discord'){
    p=UI.p('<span class="narrator">You had servers together. A reminder of who you were before.</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="narrator">You didn\'t open up much. Didn\'t care about anyone or anything.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">The servers became museums of a person you used to be.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Distance is safe. Distance doesn\'t ask anything of you.</span>');await UI.show(p,1200);
  }else{
    p=UI.p('<span class="narrator">The daily driver. Everything important happened here.</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="narrator">Day-to-day conversations. The streak becoming sacred.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Snapchat was where the real story lived. Everything else was just noise.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Disappearing messages make everything feel more permanent.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 4: SIGMA ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="her">"I\'m sigma."</span>');await UI.show(p,1100);await sleep(600);

  p=UI.p('<span class="narrator">She says this mid-bite of something. Doesn\'t even look up.</span>');await UI.show(p);await sleep(600);

  p=UI.p('<span class="narrator">Most people enter your life apologizing for the space they take.</span>');await UI.show(p);await sleep(500);

  p=UI.p('<span class="narrator">She walks in like she designed the floor plan.</span>');await UI.show(p);await sleep(700);

  p=UI.p('<span class="me">Your mouth does something you don\'t authorize.</span>');await UI.show(p);
  await UI.waitClick();

  const c3=await choose('d_tape1_sigma_reaction',[
    {text:'"That\'s the most unhinged thing anyone has said to me."',id:'call_annoying',preview:'Push back'},
    {text:'Say nothing. You\'re fighting your own face.',id:'say_nothing_smile',preview:'Let her in',emotional:true},
    {text:'"Explain. Use small words."',id:'ask_meaning',preview:'Curiosity wins'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c3==='call_annoying'){
    p=UI.p('<span class="narrator">She laughs. Not politely. Full volume.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="her">"Good. Annoyed means you\'re paying attention."</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">She\'s right. Which annoys you more.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">She tests you by being impossible. You respect impossible.</span>');await UI.show(p,1200);
  }else if(c3==='say_nothing_smile'){
    VFX.emotional();
    p=UI.p('<span class="narrator">Your mouth curves. You kill it immediately. Too late.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="her">"Caught you."</span>');await UI.show(p,700);await sleep(700);
    p=UI.p('<span class="narrator">Two words. With the confidence of someone watching you closer than you realized.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">The first crack in your wall was a smile you couldn\'t suppress.</span>');await UI.show(p,1200);
  }else{
    p=UI.p('<span class="her">"Means I don\'t need anyone to tell me I\'m worth something. I already know."</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">No arrogance. Like stating that water is wet.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">You\'ve never met someone this certain. It terrifies you. It makes you want to stay.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Understanding someone is the first form of intimacy.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 5: PRINCESS TYCOON ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="her">"play princess tycoon with me"</span>');await UI.show(p,900);await sleep(600);

  p=UI.p('<span class="narrator">Princess. Tycoon. Roblox. Dead serious.</span>');await UI.show(p);await sleep(600);

  p=UI.p('<span class="me">You should say no. Every cool part of you says no.</span>');await UI.show(p);
  await UI.waitClick();

  const c4=await choose('d_tape1_princess_tycoon',[
    {text:'Play. Complain the whole time. Best night of your month.',id:'play_complain',preview:'Show up completely',emotional:true},
    {text:'Refuse. Watch her play. Run commentary.',id:'refuse_watch',preview:'Dignity intact'},
    {text:'"Only if you promise to lose." Make it personal.',id:'make_challenge',preview:'Engage on your terms'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c4==='play_complain'){
    p=UI.p('<span class="narrator">Two hours. Your castle: depressed shoebox.</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="narrator">Hers: seventeen turrets. A moat.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Worst game you\'ve ever played. You\'ll play again tomorrow.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Time can\'t be faked. You spent two hours on turrets for someone you didn\'t expect.</span>');await UI.show(p,1200);
  }else if(c4==='refuse_watch'){
    p=UI.p('<span class="me">"Your turret placement is objectively wrong."</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="her">"Your FACE is objectively wrong."</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">Your commentary makes her laugh harder than the game.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Distance is just another way of being present.</span>');await UI.show(p,1200);
  }else{
    VFX.emotional();
    p=UI.p('<span class="her">"deal"</span>');await UI.show(p,600);await sleep(500);
    p=UI.p('<span class="narrator">She wins by a margin suggesting she\'s played since birth.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="her">"didn\'t promise to TRY to lose"</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Losing to someone and smiling is your body surrendering.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 6: MEMORY MATCH ═══
  idx++;updateCounter(idx,T);
  $('sheepy').classList.add('show');Sheepy.show('thoughtful');
  await Sheepy.say('Pause.');await sleep(450);
  await Sheepy.say('Before we go further...');await sleep(450);
  await Sheepy.say('Prove you remember what matters.');
  await sleep(700);
  $('sheepy').classList.add('hide');await sleep(800);$('sheepy').classList.remove('show','hide');
  await memoryMatch();

  idx++;updateCounter(idx,T);UI.clear();
  $('sheepy').classList.add('show');Sheepy.show('happy');
  await Sheepy.say('Good. You remember more than you let on.');await sleep(550);
  await Sheepy.say('<span class="hand">Now the hard part.</span>');
  await sleep(700);
  $('sheepy').classList.add('hide');await sleep(800);$('sheepy').classList.remove('show','hide');
  await UI.waitClick();

  // ═══ ACT 7: THE SCRATCH ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="narrator">Weeks blur. You stop counting days since she added you.</span>');await UI.show(p);await sleep(600);
  p=UI.p('<span class="narrator">Then: a scratch on her hand. Small. Most wouldn\'t notice.</span>');await UI.show(p);await sleep(600);
  p=UI.p('<span class="me">You notice before she does.</span>');await UI.show(p);
  await UI.waitClick();

  const c5=await choose('d_tape1_scratch',[
    {text:'"Show me." Take her hand.',id:'take_hand',preview:'Cross the line',emotional:true},
    {text:'"Be more careful." Look away.',id:'look_away',preview:'Protect the wall'},
    {text:'Say nothing. Add to the catalog.',id:'file_away',preview:'Silent devotion'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c5==='take_hand'){
    VFX.emotional();
    p=UI.p('<span class="narrator">You take her hand. Turn it over.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">Three seconds. Examining a wound that doesn\'t exist.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="narrator">She doesn\'t pull away. She doesn\'t breathe.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="memory">The first touch is never dramatic. It\'s disguised as concern.</span>');await UI.show(p,1200);
  }else if(c5==='look_away'){
    p=UI.p('<span class="me">"Be more careful." Like you say that to everyone.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">You don\'t. She knows.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Caring silently hurts differently. You chose your pain.</span>');await UI.show(p,1200);
  }else{
    p=UI.p('<span class="narrator">You file it away. Her scratches. Her laugh. How she tucks hair behind her left ear.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Building a cathedral of observations she doesn\'t know exists.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Observation is devotion\'s quietest dialect.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 8: 3 AM ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="time">11:47 PM → 1:23 AM → 3:08 AM</span>');await UI.show(p);await sleep(700);

  Phone.setTime('3:08 AM');
  Phone.setMessages([{her:true,text:"can't sleep"},{her:true,text:'talk to me'}]);
  Phone.show();Snd.phoneNotify();await sleep(1400);

  p=UI.p('<span class="narrator">The snaps get later. You never initiate. But your phone is always in hand.</span>');
  await UI.show(p);await sleep(600);Phone.hide();await sleep(400);

  p=UI.p('<span class="me">Four words. The most honest sentence she\'s ever sent.</span>');await UI.show(p);await sleep(500);
  p=UI.p('<span class="me">At 3 AM nobody has the energy to lie.</span>');await UI.show(p);
  await UI.waitClick();

  const c6=await choose('d_tape1_late_night',[
    {text:'Send a voice note. Your real voice at 3 AM.',id:'voice_note',preview:'The middle path',emotional:true},
    {text:'Text back safe. Stay in your lane.',id:'text_back_safe',preview:'Keep distance'},
    {text:'Stay up talking until sunrise. Sleep is optional.',id:'stay_up_talking',preview:'All in'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c6==='voice_note'){
    p=UI.p('<span class="narrator">Your voice at 3 AM. Unguarded. The version that only exists with lights off.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">"I\'m here. What\'s on your mind?"</span>');await UI.show(p);await sleep(500);
    p=UI.p('<span class="narrator">She sends one back. Five minutes long. You\'ll never tell anyone what she said.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">A voice at 3 AM is a letter that can\'t be screenshotted.</span>');await UI.show(p,1200);
  }else if(c6==='text_back_safe'){
    Phone.setTime('3:10 AM');
    Phone.setMessages([{her:true,text:"can't sleep"},{her:true,text:'talk to me'},{me:true,text:"what's keeping you up"}]);
    Phone.show();Snd.phoneNotify();await sleep(1200);Phone.hide();
    p=UI.p('<span class="narrator">You want to say so much. Type and delete six things.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Send a meme. Safety has a price tag.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">The distance between what you typed and sent could fill a novel.</span>');await UI.show(p,1200);
  }else{
    VFX.emotional();
    p=UI.p('<span class="narrator">You stay up. Snap after snap until the screen catches the first light.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">Neither of you mentions how tired you\'ll be. Some things matter more than sleep.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">Shared exhaustion is intimacy by another name.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 9: JEALOUSY ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="her">"this guy keeps trying to talk to me lol so annoying"</span>');await UI.show(p);await sleep(700);

  p=UI.p('<span class="me">Your jaw sets. Something tightens in your chest.</span>');await UI.show(p);await sleep(500);
  p=UI.p('<span class="me">You didn\'t authorize this reaction.</span>');await UI.show(p);await sleep(600);

  p=UI.p('<span class="memory">Jealousy is your subconscious filing a police report: something valuable at risk.</span>');await UI.show(p,1200);
  await UI.waitClick();

  const c7=await choose('d_tape1_jealousy',[
    {text:'"Tell him you\'re busy." Let silence talk.',id:'tell_her_busy',preview:'Territorial'},
    {text:'"Annoying like me, or actually annoying?"',id:'annoying_how',preview:'Seek your place',emotional:true},
    {text:'Change subject. Pretend blood pressure normal.',id:'change_subject',preview:'Deny everything'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(c7==='tell_her_busy'){
    VFX.glitch();
    p=UI.p('<span class="me">"Tell him you\'re busy."</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">Four words. She hears the fifth: <em>with me.</em></span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="narrator">She doesn\'t mention him again.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">You didn\'t ask her to choose. Just made sure she knew you were an option.</span>');await UI.show(p,1200);
  }else if(c7==='annoying_how'){
    VFX.emotional();
    p=UI.p('<span class="narrator">She laughs. Stops. Something rearranges in her face.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="her">"you\'re not annoying. you\'re... different."</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="me">You screenshot. Hate yourself. Keep it anyway.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">"Different" means: everyone else in one category. Then you.</span>');await UI.show(p,1200);
  }else{
    p=UI.p('<span class="me">"anyway did you see that meme"</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="narrator">Subject changed. Heart rate: not changed.</span>');await UI.show(p);await UI.show(p);await sleep(600);
    p=UI.p('<span class="me">She sees through it. Always does.</span>');await UI.show(p);await sleep(600);
    p=UI.p('<span class="memory">The mask fits perfectly. That\'s the problem.</span>');await UI.show(p,1200);
  }
  await UI.waitClick();

  // ═══ ACT 10: REALIZATION ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  p=UI.p('<span class="narrator">It doesn\'t happen all at once. No movie moment.</span>');await UI.show(p);await sleep(700);
  p=UI.p('<span class="narrator">Just that one day you realize you\'ve been checking <span class="snapchat">Snapchat</span> every four minutes.</span>');await UI.show(p);await sleep(600);
  p=UI.p('<span class="narrator">For weeks.</span>');await UI.show(p);await sleep(800);

  p=UI.p('<span class="narrator">And the thought of her not snapping back—</span>');await UI.show(p);await sleep(900);

  p=UI.p('<span class="moment">Unthinkable.</span>');await UI.show(p,1400);VFX.emotional();await sleep(900);

  p=UI.p('<span class="memory">The seed is already in the ground. Nobody asked permission. It just grew.</span>');await UI.show(p,1200);
  await UI.waitClick();

  const c8=await choose('d_tape1_realization',[
    {text:'Pull back. Protect your walls.',id:'pull_back',preview:'Fear wins'},
    {text:'Lean in. Let it happen.',id:'lean_in',preview:'Courage',emotional:true},
    {text:'Watch. Wait. See what grows.',id:'watch_grow',preview:'Patience'}
  ]);

  // ═══ ACT 11: SOIL ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  $('sheepy').classList.add('show');Sheepy.show('thoughtful');
  await Sheepy.say('A seed doesn\'t choose where it falls.');await sleep(700);
  await Sheepy.say('But the soil chooses whether to hold it.');await sleep(700);
  await Sheepy.say('<span class="hand">What kind of soil are you?</span>');await sleep(900);
  $('sheepy').classList.add('hide');await sleep(800);$('sheepy').classList.remove('show','hide');

  const soil=await choose('d_tape1_soil_choice',[
    {text:'Rich soil. "I want this. I\'ll water it myself."',id:'rich_soil',preview:'All in',emotional:true},
    {text:'Rocky soil. "I\'m afraid. But I won\'t stop it."',id:'rocky_soil',preview:'Guarded but open'},
    {text:'Frozen ground. "Not ready. Not yet."',id:'barren_soil',preview:'The seed waits'}
  ]);

  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  if(State.has('e_soil_rich')){
    VFX.emotional();
    p=UI.p('<span class="me">The soil is warm. Soft enough to hold something fragile.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="me">You sink in. Not all the way. But enough to mean it.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="narrator" style="color:var(--trust)">The seed found good ground.</span>');await UI.show(p,1200);await sleep(700);
    p=UI.p('<span class="memory">Rich soil doesn\'t promise growth. Just says: whatever you become, I\'m here.</span>');await UI.show(p,1300);
  }else if(State.has('e_soil_rocky')){
    p=UI.p('<span class="me">Cold. Hard. But between stones, gaps.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="me">Roots might find spaces. Harder. But nothing easy survives winter.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="narrator" style="color:var(--earth-pale)">The seed will work harder. Might grow stronger.</span>');await UI.show(p,1200);await sleep(700);
    p=UI.p('<span class="memory">Flowers through rock are the ones no one can pick.</span>');await UI.show(p,1300);
  }else{
    p=UI.p('<span class="me">Frozen. Nothing moves. But there\'s a crack. There\'s always a crack.</span>');await UI.show(p);await sleep(700);
    p=UI.p('<span class="narrator" style="color:var(--dim)">Dormancy isn\'t death. Seeds wait years.</span>');await UI.show(p,1200);await sleep(700);
    p=UI.p('<span class="memory">The patient seed outlasts the impatient gardener.</span>');await UI.show(p,1300);
  }
  await UI.waitClick();

  // ═══ END ═══
  idx++;updateCounter(idx,T);Snd.whoosh();UI.clear();

  $('sheepy').classList.add('show');Sheepy.show('happy');
  await Sheepy.say('SIDE A is done.');await sleep(600);
  await Sheepy.say('The seed is in the ground now.');await sleep(600);
  await Sheepy.say('What happens next depends on the weather.');await sleep(600);
  await Sheepy.say('<span class="hand">And the weather is always changing.</span>');await sleep(900);

  State.save();Snd.complete();VFX.pulse();await sleep(2500);
  UI.clear();
  p=UI.p('<span class="narrator" style="text-align:center;font-size:1.25em;color:var(--earth-glow)">END OF SIDE A — EJECTING...</span>');
  await UI.show(p,1200);await sleep(3500);
  window.location.href='index.html';
}

/* ═══════════════════════════════════════════════════════════════════
   INIT
   ═══════════════════════════════════════════════════════════════════ */
$('audio-btn').addEventListener('click',()=>Snd.toggle());
document.addEventListener('contextmenu',e=>e.preventDefault());
boot();
</script>
</body>
</html>
