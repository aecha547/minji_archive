<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SIDE A: Soil</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cellipse cx='16' cy='18' rx='6' ry='9' fill='%238B7355' opacity='.8'/%3E%3C/svg%3E">
<style>
@import url('https://fonts.googleapis.com/css2?family=VT323&family=Caveat:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap');
:root{--pink:#ff6b9d;--pink-dim:#884466;--pink-bright:#ffb3cc;--gold:#d4af37;--green:#a8e6a3;--warm:#ffeedd;--earth:#8B7355;--dim:#555;--white:#d4d4d4}
*{margin:0;padding:0;box-sizing:border-box;user-select:none}
html,body{height:100%;overflow:hidden;background:#050505;font-family:'VT323',monospace;color:var(--pink)}
.crt-screen{position:relative;overflow:hidden;min-height:100vh}
.crt-screen::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.1) 2px,rgba(0,0,0,.1) 4px);pointer-events:none;z-index:100}
.crt-screen::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,.75) 100%);pointer-events:none;z-index:101}
.header{position:fixed;top:0;left:0;right:0;z-index:50;display:flex;justify-content:space-between;align-items:center;padding:14px 18px;background:rgba(0,0,0,.6)}
.back-btn{color:var(--dim);text-decoration:none;font-size:.9rem;transition:color .3s}
.back-btn:hover{color:var(--pink)}
.tape-label{background:linear-gradient(180deg,#f0e8d8,#d8d0c0);color:#1a1a1a;padding:4px 12px;font-size:.65rem;text-transform:uppercase;letter-spacing:1px;border:1px solid #888}
.main{position:relative;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:70px 20px 30px}

/* Sheepy narrator */
.sheepy-box{display:flex;flex-direction:column;align-items:center;gap:12px;margin-bottom:28px}
.sheepy-glow{width:130px;height:130px;background:radial-gradient(circle,rgba(139,115,85,.25) 0%,transparent 65%);border-radius:50%;display:flex;align-items:center;justify-content:center}
.sheepy-text{font-family:'Cormorant Garamond',serif;font-size:clamp(.95rem,2.2vw,1.15rem);color:var(--earth);text-align:center;max-width:360px;line-height:1.8;min-height:45px}
.sheepy-text .hand{font-family:'Caveat',cursive;font-size:1.15em;color:var(--gold)}

/* Scene */
.scene{max-width:500px;width:100%;text-align:center;margin-bottom:24px}
.scene p{font-family:'Cormorant Garamond',serif;font-size:clamp(1rem,2.3vw,1.25rem);color:var(--warm);line-height:2;margin-bottom:14px;opacity:0;transform:translateY(8px);transition:all .5s}
.scene p.show{opacity:1;transform:translateY(0)}
.scene .narrator{color:var(--dim);font-style:italic}
.scene .her{color:var(--pink)}
.scene .me{color:var(--gold)}
.scene .sheepy{color:var(--pink-bright)}
.scene .memory{color:var(--earth);font-style:italic;opacity:.8}

/* Choices */
.choices{width:100%;max-width:440px;display:flex;flex-direction:column;gap:10px}
.choice{width:100%;padding:14px 18px;background:linear-gradient(145deg,rgba(20,10,15,.9),rgba(10,5,8,.95));
  border:1px solid rgba(139,115,85,.35);color:var(--white);font-family:'Cormorant Garamond',serif;
  font-size:clamp(.9rem,2vw,1.05rem);text-align:left;cursor:pointer;transition:all .25s;border-radius:4px}
.choice:hover:not(:disabled){border-color:var(--earth);transform:translateX(4px);box-shadow:0 4px 15px rgba(139,115,85,.15)}
.choice:disabled{cursor:default}
.choice.selected{border-color:var(--earth);background:rgba(139,115,85,.1)}
.choice .effect{display:block;margin-top:8px;font-size:.8rem;color:var(--dim);font-style:italic}

/* Memory Match Game */
.match-box{width:100%;max-width:380px;margin:0 auto}
.match-title{font-size:clamp(.9rem,1.8vw,1.1rem);color:var(--earth);letter-spacing:.15em;margin-bottom:16px;text-align:center}
.match-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.match-card{aspect-ratio:1;background:linear-gradient(145deg,#1a1410,#0d0a08);border:2px solid #2a2015;
  border-radius:10px;display:flex;align-items:center;justify-content:center;
  font-family:'Caveat',cursive;font-size:clamp(.75rem,1.6vw,.9rem);color:var(--dim);
  cursor:pointer;transition:all .25s;position:relative;overflow:hidden}
.match-card:hover:not(.flipped):not(.matched){border-color:#3a2a1f;transform:scale(1.03)}
.match-card.flipped,.match-card.matched{background:linear-gradient(145deg,#2a1a10,#1a0c08);border-color:var(--earth)}
.match-card.flipped .card-inner,.match-card.matched .card-inner{opacity:1;transform:rotateY(0)}
.card-inner{opacity:0;transform:rotateY(90deg);transition:all .35s;color:var(--earth);text-align:center;padding:6px;line-height:1.4}
.match-card.matched{border-color:var(--green);box-shadow:0 0 12px rgba(168,230,163,.25)}
.match-card.matched .card-inner{color:var(--green)}
.match-story{margin-top:18px;text-align:center;min-height:45px;font-family:'Cormorant Garamond',serif;font-size:.95rem;color:var(--gold);font-style:italic;line-height:1.6}
.match-progress{text-align:center;margin-top:10px;font-size:12px;color:var(--dim)}

/* HUD */
.hud{position:fixed;bottom:14px;right:14px;font-size:.75rem;color:var(--dim);text-align:right;line-height:1.6;z-index:50}
.trust-bar{width:90px;height:5px;background:#222;border-radius:2px;margin-top:5px;overflow:hidden}
.trust-fill{height:100%;background:var(--earth);transition:width .3s;border-radius:2px}
.guard-bar{width:90px;height:5px;background:#222;border-radius:2px;margin-top:3px;overflow:hidden}
.guard-fill{height:100%;background:#555;transition:width .3s;border-radius:2px}

/* Continue hint */
.hint{position:fixed;bottom:14px;left:50%;transform:translateX(-50%);color:var(--gold);font-size:.85rem;opacity:.6;animation:hintPulse 2s infinite}
@keyframes hintPulse{0%,100%{opacity:.4}50%{opacity:.75}}

@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn .4s ease forwards}

/* Scene counter */
.scene-counter{position:fixed;top:14px;right:16px;font-size:12px;color:var(--dim);z-index:60}

/* Rating badge */
.rating-badge{position:fixed;bottom:14px;left:14px;background:rgba(0,0,0,.6);padding:6px 12px;border-radius:4px;border:1px solid #2a2a2a;font-size:10px;color:var(--earth);z-index:50}
</style>
</head>
<body>
<div class="crt-screen">
  <div class="header">
    <a href="index.html" class="back-btn">◀ EJECT</a>
    <div class="tape-label">SIDE A: SOIL</div>
    <div class="scene-counter" id="counter"></div>
  </div>
  <div class="main">
    <div class="sheepy-box">
      <div class="sheepy-glow" id="sglow"></div>
      <div class="sheepy-text" id="stxt"></div>
    </div>
    <div class="scene" id="scene"></div>
    <div class="choices" id="choices"></div>
    <div class="match-box" id="match" style="display:none"></div>
  </div>
  <div class="hud">
    <div>TRUST: <span id="trust">0</span></div>
    <div class="trust-bar"><div class="trust-fill" id="tbar" style="width:0%"></div></div>
    <div style="margin-top:8px">GUARD: <span id="guard">0</span></div>
    <div class="guard-bar"><div class="guard-fill" id="gbar" style="width:0%"></div></div>
  </div>
  <div class="hint" id="hint" style="display:none">[ CLICK TO CONTINUE ]</div>
  <div class="rating-badge">RATING: 9.2/10</div>
</div>

<audio id="bgm" loop></audio>
<script>
'use strict';
const $=id=>document.getElementById(id);
const sleep=ms=>new Promise(r=>setTimeout(r,ms));

/* ═══ STATE ═══ */
const KEY='seed_archive_v3';
let state={trust:0,guard:0,soil:null,honesty:0,vulnerability:0,memories:[]};
function loadState(){try{const s=JSON.parse(localStorage.getItem(KEY));if(s){state.trust=s.trust||0;state.guard=s.guard||0;state.soil=s.soil||null;state.honesty=s.honesty||0;state.vulnerability=s.vulnerability||0}}catch{}}
function saveState(){try{const s=JSON.parse(localStorage.getItem(KEY))||{};s.trust=state.trust;s.guard=state.guard;s.soil=state.soil;s.honesty=state.honesty;s.vulnerability=state.vulnerability;localStorage.setItem(KEY,JSON.stringify(s))}catch{}}
function addTrust(v){state.trust+=v;updateHUD()}
function addGuard(v){state.guard+=v;updateHUD()}
function updateHUD(){$('trust').textContent=state.trust;$('guard').textContent=state.guard;$('tbar').style.width=Math.min(100,state.trust*5)+'%';$('gbar').style.width=Math.min(100,state.guard*5)+'%'}

/* ═══ AUDIO ═══ */
let audioCtx=null,master=null;
function sInit(){if(audioCtx)return;audioCtx=new(window.AudioContext||window.webkitAudioContext)();master=audioCtx.createGain();master.gain.value=.32;master.connect(audioCtx.destination)}
function sResume(){if(audioCtx?.state==='suspended')audioCtx.resume()}
function note(f,dur,type,vol){if(!audioCtx)return;const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type=type||'triangle';o.frequency.value=f;g.gain.setValueAtTime(.001,audioCtx.currentTime);g.gain.linearRampToValueAtTime(vol||.04,audioCtx.currentTime+.01);g.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+dur);o.connect(g);g.connect(master);o.start();o.stop(audioCtx.currentTime+dur+.03)}
function sfxType(){note(1300+Math.random()*350,.012,'square',.01)}
function sfxSelect(){note(440,.08,'sine',.04);setTimeout(()=>note(660,.08,'sine',.03),50)}
function sfxMatch(){[392,523,659,784].forEach((f,i)=>setTimeout(()=>note(f,.18,'sine',.035),i*70))}
function sfxFlip(){note(320,.04,'triangle',.03)}
function sfxWhoosh(){note(250,.18,'sawtooth',.02)}
function sfxComplete(){note(392,.35,'sine',.05);setTimeout(()=>note(494,.35,'sine',.05),180);setTimeout(()=>note(587,.5,'sine',.05),360)}

let bgm=null;
function playBGM(src,vol){bgm=$('bgm');bgm.src=src;bgm.volume=vol||.2;bgm.currentTime=10;bgm.play().catch(()=>{})}

/* ═══ TYPEWRITER ═══ */
async function type(el,text,spd){spd=spd||20;el.innerHTML='';for(let i=0;i<text.length;i++){if(text[i]==='<'){const j=text.indexOf('>',i);el.innerHTML+=text.substring(i,j+1);i=j}else{el.innerHTML+=text[i];sfxType()}await sleep(spd)}}

/* ═══ SHEEPY ═══ */
const SHEEPY=(size,hold,expr)=>{
  const m=expr==='happy'?'M-5 2 Q0 8 5 2':expr==='sad'?'M-5 5 Q0 0 5 5':expr==='nervous'?'M-4 4 Q-2 2 0 4 Q2 6 4 4':'M-4 3 L4 3';
  return `<svg width="${size}" height="${size}" viewBox="0 0 120 120" style="animation:bounce 2s infinite">
    <ellipse cx="60" cy="75" rx="32" ry="26" fill="#e8e0d8"/>
    <ellipse cx="60" cy="35" rx="18" ry="14" fill="#ffeef0"/>
    <ellipse cx="35" cy="28" rx="6" ry="4" fill="#d8c8b8" transform="rotate(-18 35 28)"/>
    <ellipse cx="85" cy="28" rx="6" ry="4" fill="#d8c8b8" transform="rotate(18 85 28)"/>
    <ellipse cx="42" cy="39" rx="4" ry="2" fill="#c8a898" opacity=".35"/>
    <ellipse cx="78" cy="39" rx="4" ry="2" fill="#c8a898" opacity=".35"/>
    <ellipse cx="50" cy="32" rx="3" ry="4" fill="#222"/>
    <ellipse cx="70" cy="32" rx="3" ry="4" fill="#222"/>
    <circle cx="51" cy="31" r="1" fill="#fff"/>
    <circle cx="71" cy="31" r="1" fill="#fff"/>
    <ellipse cx="60" cy="41" rx="2" ry="1.5" fill="#c8a898"/>
    <g transform="translate(60 48)"><path d="${m}" stroke="#c8a898" stroke-width="1.5" fill="none" stroke-linecap="round"/></g>
    ${hold?`<g transform="translate(78 50)"><rect width="18" height="12" rx="1" fill="#fff5e6" stroke="#8B7355"/><circle cx="9" cy="6" r="2" fill="#8B7355"/></g>`:''}
  </svg>`;
};
function showSheepy(expr,hold){$('sglow').innerHTML=SHEEPY(110,hold||false,expr||'neutral')}

/* ═══ SCENES ═══ */
const sceneEl=$('scene'),choicesEl=$('choices'),matchEl=$('match'),hintEl=$('hint'),stxt=$('stxt'),counterEl=$('counter');
let sceneIdx=0;

function clearScene(){sceneEl.innerHTML='';choicesEl.innerHTML='';matchEl.style.display='none';hintEl.style.display='none'}
function p(text,cls){const el=document.createElement('p');el.innerHTML=text;if(cls)el.className=cls;sceneEl.appendChild(el);return el}
async function show(el){el.classList.add('show');await sleep(320)}
function waitClick(){
  return new Promise(r=>{
    hintEl.style.display='block';
    const h=()=>{hintEl.style.display='none';document.removeEventListener('click',h);document.removeEventListener('keydown',kh);r()};
    const kh=e=>{if(e.key==='Enter'||e.key===' '||e.key==='z')h()};
    document.addEventListener('click',h);document.addEventListener('keydown',kh);
  });
}
function updateCounter(total){counterEl.textContent=`${sceneIdx}/${total}`}

function choose(opts){
  return new Promise(r=>{
    choicesEl.innerHTML='';
    opts.forEach(opt=>{
      const btn=document.createElement('button');btn.className='choice';
      btn.innerHTML=`<span>${opt.text}</span>`;
      btn.onclick=()=>{
        sfxSelect();
        document.querySelectorAll('.choice').forEach(b=>b.disabled=true);
        btn.classList.add('selected');
        if(opt.effect)btn.innerHTML+=`<span class="effect">${opt.effect}</span>`;
        if(opt.trust)addTrust(opt.trust);
        if(opt.guard)addGuard(opt.guard);
        if(opt.honesty)state.honesty++;
        if(opt.vulnerability)state.vulnerability++;
        saveState();
        setTimeout(()=>r(opt.value||opt.text),1100);
      };
      choicesEl.appendChild(btn);
    });
  });
}

/* ═══ MEMORY MATCH - Extended with 8 pairs ═══ */
const PAIRS=[
  {id:1,a:'finger slip',b:'fate or accident?',story:'The accident that started everything. Or was it destiny wearing a mask?'},
  {id:2,a:'"sigma"',b:'direct & honest',story:'She told you who she was from the start. You listened eventually.'},
  {id:3,a:'princess tycoon',b:'2 AM together',story:'Two hours on a children\'s game. The longest short game of your life.'},
  {id:4,a:'scratches',b:'noticing',story:'She notices what you hide. You notice her noticing. Neither mentions it.'},
  {id:5,a:'450 → 80',b:'slowing down',story:'You changed your pace. For someone who moves fast, you learned to wait.'},
  {id:6,a:'20v1',b:'opting out',story:'You chose differently. Not because of the game. Because of who you wanted to be.'},
  {id:7,a:'late night calls',b:'sunrise conversations',story:'The phone became a lifeline. Neither of you wanted to hang up first.'},
  {id:8,a:'"whatever"',b:'caring too much',story:'You said you didn\'t care. Your actions said otherwise. She believed your actions.'},
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.random()*(i+1)|0;[a[i],a[j]]=[a[j],a[i]]}return a}

function memoryMatch(){
  return new Promise(resolve=>{
    clearScene();showSheepy('happy',false);
    matchEl.style.display='block';
    matchEl.innerHTML=`<div class="match-title">MEMORY MATCH — FIND THE CONNECTIONS</div><div class="match-grid" id="mgrid"></div><div class="match-story" id="mstory"></div><div class="match-progress" id="mprog">0/8 matched</div>`;
    
    const cards=[];PAIRS.forEach(p=>{cards.push({pairId:p.id,text:p.a,story:p.story});cards.push({pairId:p.id,text:p.b,story:p.story})});
    shuffle(cards);
    
    const grid=$('#mgrid'),story=$('#mstory'),prog=$('#mprog');
    let flipped=[],matched=0,lock=false;
    
    cards.forEach((c,idx)=>{
      const card=document.createElement('div');card.className='match-card';
      card.dataset.pair=c.pairId;card.dataset.idx=idx;
      card.innerHTML=`<div class="card-inner">${c.text}</div>`;
      card.onclick=()=>{
        if(lock||card.classList.contains('flipped')||card.classList.contains('matched'))return;
        sfxFlip();card.classList.add('flipped');flipped.push(card);
        if(flipped.length===2){
          lock=true;
          if(flipped[0].dataset.pair===flipped[1].dataset.pair){
            sfxMatch();matched++;
            const p=PAIRS.find(x=>x.id==flipped[0].dataset.pair);
            if(p)story.textContent=p.story;
            state.memories.push(p.id);
            prog.textContent=`${matched}/8 matched`;
            setTimeout(()=>{
              flipped.forEach(f=>f.classList.add('matched'));
              flipped=[];lock=false;
              if(matched>=PAIRS.length){addTrust(3);state.honesty+=2;saveState();setTimeout(resolve,600)}
            },350);
          }else{
            setTimeout(()=>{flipped.forEach(f=>f.classList.remove('flipped'));flipped=[];lock=false},700);
          }
        }
      };
      grid.appendChild(card);
    });
  });
}

/* ═══ STORY - DEEPER NARRATIVE ═══ */
async function story(){
  sInit();sResume();playBGM('WONDER.mp3',.2);loadState();updateHUD();
  const totalScenes=28;updateCounter(totalScenes);
  await sleep(500);
  
  // ═══ SCENE 1: The Very Beginning ═══
  sceneIdx++;updateCounter(totalScenes);
  showSheepy('nervous',true);
  await type(stxt,`baa. Before this story starts...`);
  await sleep(300);
  await type(stxt,`I need you to know something important.`);
  await sleep(250);
  await type(stxt,`He almost didn't reply. Almost.`);
  await sleep(350);
  clearScene();
  
  const s1=p('<span class="narrator">A notification illuminates your screen.</span>');await show(s1);
  const s2=p('<span class="narrator">A message from a number you don\'t recognize. Someone\'s finger slipped.</span>');await show(s2);
  const s3=p('<span class="narrator">Later she\'ll tell you it was an accident. Maybe it was.</span>');await show(s3);
  const s4=p('<span class="memory">But accidents don\'t keep happening for months.</span>');await show(s4);
  await waitClick();
  
  const c1=await choose([
    {text:'Reply immediately. Don\'t overthink it.',effect:'Trust +1 — You chose curiosity over caution',trust:1},
    {text:'Leave it on read. Wait three hours.',effect:'Guard +1 — You chose to protect yourself',guard:1},
    {text:'Stare at the screen. Let it glow in the dark.',effect:'Neutral — You chose to feel before acting',trust:0,guard:0},
  ]);
  
  // ═══ SCENE 2: The Reply ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c1.includes('immediately')||c1.includes('Reply immediately')){
    const r1=p('<span class="narrator">You reply in under a minute.</span>');await show(r1);
    const r2=p('<span class="narrator">Later you\'ll tell yourself it\'s because you were bored.</span>');await show(r2);
    const r3=p('<span class="me">You weren\'t bored. You were curious. There\'s a difference.</span>');await show(r3);
    const r4=p('<span class="memory">Curiosity is just hope wearing a disguise.</span>');await show(r4);
  }else if(c1.includes('three hours')||c1.includes('Leave it')){
    const r1=p('<span class="narrator">Three hours. You craft something casual.</span>');await show(r1);
    const r2=p('<span class="narrator">It takes eleven minutes to write. You delete it twice.</span>');await show(r2);
    const r3=p('<span class="me">She\'ll never know you hesitated. And you\'ll never admit it.</span>');await show(r3);
    const r4=p('<span class="memory">Protection looks like indifference. But it isn\'t.</span>');await show(r4);
  }else{
    const r1=p('<span class="narrator">The screen glows. Your thumb hovers. Nothing happens.</span>');await show(r1);
    const r2=p('<span class="narrator">You\'re paralyzed by the weight of a single decision.</span>');await show(r2);
    const r3=p('<span class="me">Then she texts again: "hello??"</span>');await show(r3);
    const r4=p('<span class="memory">Sometimes the universe pushes when you won\'t pull.</span>');await show(r4);
  }
  await waitClick();
  
  // ═══ SCENE 3: The Sigma Declaration ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const t1=p('<span class="her">"I\'m sigma," she says. To your face. Unironically.</span>');await show(t1);
  const t2=p('<span class="narrator">Most people enter your life apologizing for the space they take up.</span>');await show(t2);
  const t3=p('<span class="narrator">She walks in like she built the room.</span>');await show(t3);
  const t4=p('<span class="me">It\'s absurd. It\'s confident. It\'s... magnetic.</span>');await show(t4);
  await waitClick();
  
  const c2=await choose([
    {text:'"That\'s the most annoying thing anyone has ever said to me."',effect:'Guard +1, Honesty +1 — You pushed back',guard:1,honesty:true},
    {text:'Say nothing. But you\'re trying not to smile.',effect:'Trust +1 — You let her in',trust:1},
    {text:'"What does that even mean?" Genuine curiosity.',effect:'Neutral — You wanted to understand',trust:0,guard:0},
  ]);
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c2.includes('annoying')){
    const a1=p('<span class="narrator">She laughs. Not offended. Not defensive.</span>');await show(a1);
    const a2=p('<span class="her">"Good. Annoyed means you\'re paying attention."</span>');await show(a2);
    const a3=p('<span class="me">She\'s right. And that annoys you more.</span>');await show(a3);
    const a4=p('<span class="memory">Some people earn respect by demanding it.</span>');await show(a4);
  }else if(c2.includes('nothing')||c2.includes('smile')){
    const a1=p('<span class="narrator">You catch yourself smiling.</span>');await show(a1);
    const a2=p('<span class="narrator">You stop immediately. Too late.</span>');await show(a2);
    const a3=p('<span class="her">"Caught you."</span>');await show(a3);
    const a4=p('<span class="memory">The first crack in your wall was just a smile.</span>');await show(a4);
  }else{
    const a1=p('<span class="her">"It means I don\'t need validation from anyone."</span>');await show(a1);
    const a2=p('<span class="me">"That\'s... actually kind of admirable."</span>');await show(a2);
    const a3=p('<span class="narrator">She grins. You\'re learning her language.</span>');await show(a3);
    const a4=p('<span class="memory">Understanding is the first form of intimacy.</span>');await show(a4);
  }
  await waitClick();
  
  // ═══ SCENE 4: Princess Tycoon ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const p1=p('<span class="her">"Play princess tycoon with me."</span>');await show(p1);
  const p2=p('<span class="narrator">Princess. Tycoon. On Roblox. She\'s completely serious.</span>');await show(p2);
  const p3=p('<span class="me">You could refuse. You should refuse. You don\'t.</span>');await show(p3);
  await waitClick();
  
  const c3=await choose([
    {text:'Play. Complain the entire time. Secretly enjoy it.',effect:'Trust +1 — You showed up',trust:1},
    {text:'Refuse. Watch her play instead. Run commentary.',effect:'Guard +1 — You kept distance',guard:1},
    {text:'"Only if you promise to lose." Make it a challenge.',effect:'Trust +1, Vulnerability +1 — You engaged playfully',trust:1,vulnerability:true},
  ]);
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c3.includes('complain')||c3.includes('Play')){
    const q1=p('<span class="narrator">You play for two hours. Your castle is objectively terrible.</span>');await show(q1);
    const q2=p('<span class="narrator">She laughs so hard she can barely breathe.</span>');await show(q2);
    const q3=p('<span class="me">It is the worst game you\'ve ever played.</span>');await show(q3);
    const q4=p('<span class="me">You will play it again tomorrow. And the day after.</span>');await show(q4);
    const q5=p('<span class="memory">Time spent is the currency of care.</span>');await show(q5);
  }else if(c3.includes('Refuse')||c3.includes('watch')){
    const q1=p('<span class="narrator">You watch. Arms crossed. Running commentary.</span>');await show(q1);
    const q2=p('<span class="me">"Your turret placement is trash."</span>');await show(q2);
    const q3=p('<span class="her">"Your FACE is trash."</span>');await show(q3);
    const q4=p('<span class="me">You almost laugh. Almost.</span>');await show(q4);
    const q5=p('<span class="memory">Distance is just presence with walls.</span>');await show(q5);
  }else{
    const q1=p('<span class="her">"Deal."</span>');await show(q1);
    const q2=p('<span class="narrator">She wins. Obviously. She\'s played this for years.</span>');await show(q2);
    const q3=p('<span class="her">"I didn\'t promise to TRY to lose."</span>');await show(q3);
    const q4=p('<span class="me">You\'re not even mad. You\'re impressed.</span>');await show(q4);
    const q5=p('<span class="memory">Losing to her felt like winning something else.</span>');await show(q5);
  }
  await waitClick();
  
  // ═══ SCENE 5: Memory Match ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  showSheepy('happy',false);
  await type(stxt,`Before you go further...`);
  await sleep(200);
  await type(stxt,`Prove you remember what matters.`);
  await sleep(150);
  await type(stxt,`Match the pieces. Find what connects you.`);
  await sleep(250);
  
  await memoryMatch();
  
  sceneIdx++;updateCounter(totalScenes);
  clearScene();
  showSheepy('happy',false);
  await type(stxt,`Good. You remember more than you let on.`);
  await sleep(250);
  await type(stxt,`These memories are seeds themselves.`);
  await sleep(200);
  await type(stxt,`Let's see what kind of soil you're offering.`);
  await waitClick();
  
  // ═══ SCENE 6: The Scratch - Physical Intimacy ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const h1=p('<span class="narrator">Weeks pass. You don\'t notice the shift at first.</span>');await show(h1);
  const h2=p('<span class="narrator">Then one day she has a scratch on her hand. Small. Insignificant.</span>');await show(h2);
  const h3=p('<span class="me">You notice it before she does. How did you notice it before she did?</span>');await show(h3);
  const h4=p('<span class="me">"What happened to your hand?"</span>');await show(h4);
  await waitClick();
  
  const c4=await choose([
    {text:'"Show me." Take her hand. Examine it closely.',effect:'Trust +2, Vulnerability +1 — You crossed a boundary',trust:2,vulnerability:true},
    {text:'"Be more careful." Look away. Keep your distance.',effect:'Guard +1 — You maintained the wall',guard:1},
    {text:'Say nothing. File it away with everything else.',effect:'Neutral — You noticed but didn\'t act',trust:0,guard:0},
  ]);
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c4.includes('Show')||c4.includes('Take her hand')){
    const u1=p('<span class="narrator">You take her hand. Turn it over. The scratch is nothing.</span>');await show(u1);
    const u2=p('<span class="me">But you don\'t let go immediately.</span>');await show(u2);
    const u3=p('<span class="narrator">She notices. She doesn\'t pull away.</span>');await show(u3);
    const u4=p('<span class="narrator">Three seconds. An eternity in skin contact.</span>');await show(u4);
    const u5=p('<span class="memory">Neither of you mentions it. Both of you remember it forever.</span>');await show(u5);
  }else if(c4.includes('careful')||c4.includes('Look away')){
    const u1=p('<span class="me">"Be more careful," you say. Like it\'s casual.</span>');await show(u1);
    const u2=p('<span class="narrator">Like you say that to everyone.</span>');await show(u2);
    const u3=p('<span class="me">You don\'t say that to everyone.</span>');await show(u3);
    const u4=p('<span class="narrator">She knows. You know she knows. Neither admits it.</span>');await show(u4);
    const u5=p('<span class="memory">Distance is the language of fear.</span>');await show(u5);
  }else{
    const u1=p('<span class="narrator">You file it away. Another data point in your catalog of her.</span>');await show(u1);
    const u2=p('<span class="me">She doesn\'t know you\'re building a map.</span>');await show(u2);
    const u3=p('<span class="narrator">Or maybe she does. Maybe that\'s why she lets you see.</span>');await show(u3);
    const u4=p('<span class="memory">Observation is a form of devotion.</span>');await show(u4);
  }
  await waitClick();
  
  // ═══ SCENE 7: The Late Nights ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const l1=p('<span class="narrator">The texts get later. 11pm. 1am. 3am. 4:30am.</span>');await show(l1);
  const l2=p('<span class="narrator">You never initiate. But you\'re always awake.</span>');await show(l2);
  const l3=p('<span class="her">"can\'t sleep"</span>');await show(l3);
  const l4=p('<span class="her">"talk to me"</span>');await show(l4);
  const l5=p('<span class="me">Four words. A door left open in the middle of the night.</span>');await show(l5);
  await waitClick();
  
  const c5=await choose([
    {text:'Call her. Right now. 3am be damned.',effect:'Trust +2, Vulnerability +1 — You chose presence',trust:2,vulnerability:true},
    {text:'Text back. Keep it safe. Keep it light.',effect:'Guard +1 — You chose caution',guard:1},
    {text:'Send a voice note. Your voice at 3am.',effect:'Trust +1, Vulnerability +1 — A middle path',trust:1,vulnerability:true},
  ]);
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c5.includes('Call')||c5.includes('3am be damned')){
    const v1=p('<span class="narrator">You call. She picks up on the first ring.</span>');await show(v1);
    const v2=p('<span class="her">"you actually called"</span>');await show(v2);
    const v3=p('<span class="me">"You asked me to."</span>');await show(v3);
    const v4=p('<span class="narrator">You talk until sunrise. The next day, neither of you mentions it.</span>');await show(v4);
    const v5=p('<span class="memory">Some nights are written in permanent ink.</span>');await show(v5);
  }else if(c5.includes('light')||c5.includes('safe')){
    const v1=p('<span class="me">"what\'s keeping you up"</span>');await show(v1);
    const v2=p('<span class="her">"idk just thinking"</span>');await show(v2);
    const v3=p('<span class="narrator">You want to ask about what. You want to say so many things.</span>');await show(v3);
    const v4=p('<span class="me">You don\'t. Safety has a cost.</span>');await show(v4);
    const v5=p('<span class="memory">Silence is the loneliest sound at 3am.</span>');await show(v5);
  }else{
    const v1=p('<span class="narrator">Your voice at 3am. Cracked. Soft. Honest.</span>');await show(v1);
    const v2=p('<span class="me">"I\'m here. What\'s on your mind?"</span>');await show(v2);
    const v3=p('<span class="her">"...everything"</span>');await show(v3);
    const v4=p('<span class="narrator">She sends one back. Five minutes long. You don\'t share it with anyone.</span>');await show(v4);
    const v5=p('<span class="memory">Voice notes are letters that self-destruct.</span>');await show(v5);
  }
  await waitClick();
  
  // ═══ SCENE 8: The Jealousy ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const j1=p('<span class="narrator">She mentions another guy in passing. Casual. Offhand.</span>');await show(j1);
  const j2=p('<span class="her">"He\'s so annoying lol he keeps trying to talk to me"</span>');await show(j2);
  const j3=p('<span class="me">She says it dismissively. But something in your chest tightens.</span>');await show(j3);
  const j4=p('<span class="me">Your jaw sets. You didn\'t give it permission to do that.</span>');await show(j4);
  const j5=p('<span class="memory">Jealousy: the first proof that you\'re already in too deep.</span>');await show(j5);
  await waitClick();
  
  const c6=await choose([
    {text:'"Tell him you\'re busy." Let the implication hang.',effect:'Guard +1 — Possessive but honest',guard:1},
    {text:'"Annoying how? Like me annoying or actually annoying?"',effect:'Trust +1 — You wanted to know where you stand',trust:1},
    {text:'Say nothing. Change the subject. Pretend you don\'t care.',effect:'Neutral — You hid your reaction',trust:0,guard:0},
  ]);
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  if(c6.includes('busy')){
    const k1=p('<span class="me">"Tell him you\'re busy."</span>');await show(k1);
    const k2=p('<span class="narrator">Four words. She hears five.</span>');await show(k2);
    const k3=p('<span class="me">The fifth word is silent: "with me."</span>');await show(k3);
    const k4=p('<span class="me">She doesn\'t mention him again.</span>');await show(k4);
    const k5=p('<span class="memory">Territory is claimed in whispers.</span>');await show(k5);
  }else if(c6.includes('Like me annoying')){
    const k1=p('<span class="me">"Annoying how? Like me annoying?"</span>');await show(k1);
    const k2=p('<span class="narrator">She laughs. Then stops. Something shifts.</span>');await show(k2);
    const k3=p('<span class="her">"You\'re not annoying."</span>');await show(k3);
    const k4=p('<span class="her">"You\'re... different."</span>');await show(k4);
    const k5=p('<span class="me">You hate that answer. You also screenshot it.</span>');await show(k5);
    const k6=p('<span class="memory">"Different" is the most dangerous word she could have chosen.</span>');await show(k6);
  }else{
    const k1=p('<span class="me">"Anyway, did you see that meme I sent?"</span>');await show(k1);
    const k2=p('<span class="narrator">You pretend it doesn\'t bother you. You\'re very good at pretending.</span>');await show(k2);
    const k3=p('<span class="me">It bothers you. It bothers you more than you want to admit.</span>');await show(k3);
    const k4=p('<span class="memory">Indifference is a mask. She sees through it.</span>');await show(k4);
  }
  await waitClick();
  
  // ═══ SCENE 9: The Realization ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  const r1=p('<span class="narrator">Months pass. You don\'t notice when it happens.</span>');await show(r1);
  const r2=p('<span class="narrator">But suddenly the thought of not talking to her is...</span>');await show(r2);
  const r3=p('<span class="me">Unthinkable.</span>');await show(r3);
  const r4=p('<span class="me">You\'re in too deep. The seed has already been planted.</span>');await show(r4);
  const r5=p('<span class="memory">You didn\'t choose to plant it. It just... grew.</span>');await show(r5);
  await waitClick();
  
  const c7=await choose([
    {text:'Pull back. Protect yourself. It\'s not too late.',effect:'Guard +2 — Fear won this round',guard:2},
    {text:'Lean in. Let whatever happens, happen.',effect:'Trust +2, Vulnerability +1 — You chose courage',trust:2,vulnerability:true},
    {text:'Do nothing. Watch what grows. Wait and see.',effect:'Neutral — Passive acceptance',trust:0,guard:0},
  ]);
  
  // ═══ SCENE 10: The Soil Choice ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  showSheepy('neutral',false);
  await type(stxt,`A seed doesn't know it's a seed.`);
  await sleep(200);
  await type(stxt,`It just falls into dirt and decides to stay.`);
  await sleep(300);
  await type(stxt,`The question is: what kind of soil are you?`);
  await sleep(250);
  await type(stxt,`The seed will grow. Or it won't.`);
  await sleep(200);
  await type(stxt,`The soil decides.`);
  await waitClick();
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  
  const soilChoice=await choose([
    {text:'Rich soil: "I want this to grow. I\'m willing to water it."',effect:'Hopeful. Higher stakes. Higher rewards.',trust:3,value:'rich'},
    {text:'Rocky soil: "I\'m afraid it won\'t take root. But I won\'t stop it."',effect:'Guarded. Lower expectations. Safer.',guard:2,value:'rocky'},
    {text:'No soil: "I\'m not ready to plant anything. Not yet."',effect:'Ambiguous. The seed waits. Time passes.',trust:0,guard:0,value:'barren'},
  ]);
  
  // Save soil quality
  if(soilChoice.includes('rich')){state.soil='rich';addTrust(3)}
  else if(soilChoice.includes('rocky')){state.soil='rocky';addGuard(2)}
  else{state.soil='barren'}
  saveState();
  
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  
  if(state.soil==='rich'){
    const e1=p('<span class="me">The soil is warm here. Soft. Receptive.</span>');await show(e1);
    const e2=p('<span class="me">You let yourself sink in. Not deep. But enough.</span>');await show(e2);
    const e3=p('<span class="me">Enough to say: I\'m ready for whatever grows.</span>');await show(e3);
    const e4=p('<span class="sheepy">The seed has found good ground.</span>');await show(e4);
    const e5=p('<span class="memory">Rich soil doesn\'t promise growth. It just makes growth possible.</span>');await show(e5);
  }else if(state.soil==='rocky'){
    const e1=p('<span class="me">The soil is cold. Hard in places. But there are gaps.</span>');await show(e1);
    const e2=p('<span class="me">Roots might find the spaces between stones.</span>');await show(e2);
    const e3=p('<span class="me">It will be harder. But nothing worth having is easy.</span>');await show(e3);
    const e4=p('<span class="sheepy">The seed will work harder. It might grow stronger for it.</span>');await show(e4);
    const e5=p('<span class="memory">Rocky soil produces the most resilient flowers.</span>');await show(e5);
  }else{
    const e1=p('<span class="me">The ground is frozen. Hard. Impossible.</span>');await show(e1);
    const e2=p('<span class="me">But there\'s a crack. There\'s always a crack.</span>');await show(e2);
    const e3=p('<span class="me">Something always finds the crack.</span>');await show(e3);
    const e4=p('<span class="sheepy">Dormancy isn\'t death. Seeds can wait years.</span>');await show(e4);
    const e5=p('<span class="memory">The patient seed outlasts the impatient gardener.</span>');await show(e5);
  }
  await waitClick();
  
  // ═══ END ═══
  sceneIdx++;updateCounter(totalScenes);
  sfxWhoosh();clearScene();
  showSheepy('happy',false);
  await type(stxt,`SIDE A is complete.`);
  await sleep(200);
  await type(stxt,`The seed has been placed in the ground.`);
  await sleep(250);
  await type(stxt,`What happens next depends on the weather...`);
  await sleep(300);
  await type(stxt,`And the weather is always changing.`);
  await sleep(350);
  
  // Save final state
  const endState={complete:true,trust:state.trust,guard:state.guard,soil:state.soil,honesty:state.honesty,vulnerability:state.vulnerability,memories:state.memories};
  try{const s=JSON.parse(localStorage.getItem(KEY))||{};s.tape1=endState;localStorage.setItem(KEY,JSON.stringify(s))}catch{}
  
  sfxComplete();
  const end=p('<span class="narrator">END OF SIDE A — EJECTING...</span>');await show(end);
  await sleep(1400);
  window.location.href='index.html';
}

story();
</script>
</body>
</html>
